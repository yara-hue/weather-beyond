<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Flipbook</title>
    <style>
        :root {
            --text: #ffffff;
            --primary: #ffa866;
            --secondary: #94d5d8;
            --accent: #6dafca;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow: hidden;
            color: var(--text);
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.6), 0 0 16px rgba(255, 255, 255, 0.4), 0 0 24px rgba(255, 255, 255, 0.2);
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('background.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            filter: blur(8px);
            z-index: -1;
        }

        /* HOME PAGE STYLES */
        .home-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-image: url('background.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .home-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0);
            z-index: 1;
        }

        .home-content {
            position: relative;
            z-index: 2;
            text-align: center;
            color: white;
            max-width: 600px;
            padding: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            width: auto;
            max-width: none;
        }

        .language-selector {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1001;
        }

        .language-btn {
            background: rgba(255, 255, 255, 0.2);
            color: var(--text);
            border: 2px solid var(--secondary);
            padding: 8px 15px;
            margin: 0 5px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
            font-weight: bold;
            backdrop-filter: blur(10px);
        }

        .language-btn:hover {
            background: var(--secondary);
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .language-btn.active {
            background: var(--primary);
            border-color: var(--accent);
            box-shadow: 0 4px 15px rgba(137, 162, 97, 0.4);
        }

        /* LEVEL SELECTION PAGE STYLES */
        .level-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.3);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            color: white;
            text-align: center;
            font-family: 'Arial', sans-serif;
        }

        .level-title {
            font-size: 3em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            color: white;
        }

        .level-subtitle {
            margin-bottom: 50px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .level-container {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 900px;
            margin-bottom: 40px;
        }

        .level-card, .quiz-level-card {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--secondary);
            border-radius: 20px;
            padding: 30px 25px;
            min-width: 250px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            text-align: center;
        }

        .level-card:hover, .quiz-level-card:hover {
            transform: translateY(-10px);
            background: var(--secondary);
            border-color: var(--primary);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        }

        .level-age {
            font-size: 1.8em;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .level-name {
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 8px;
            color: var(--text);
        }

        .story-title {
            font-size: 1.1em;
            font-style: italic;
            color: var(--accent);
            margin-bottom: 15px;
            opacity: 0.9;
        }

        .level-description {
            font-size: 1em;
            opacity: 0.8;
            line-height: 1.4;
            color: var(--text);
            margin-bottom: 10px;
        }

        .quiz-info {
            font-size: 0.9em;
            color: var(--accent);
            font-weight: bold;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        .back-to-home-btn {
            background: rgba(255, 255, 255, 0.2);
            color: var(--text);
            border: 2px solid var(--secondary);
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
            font-weight: bold;
            backdrop-filter: blur(10px);
        }

        .back-to-home-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
        }

        .close-btn {
            background: transparent;
            color: white;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 2.5em;
            font-weight: bold;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-shrink: 0;
            position: relative;
            left: -280px;
            top: 20px;
        }

        .close-btn:hover {
            color: rgba(255, 255, 255, 0.7);
            transform: translateY(-2px) scale(1.1);
        }

        .button-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            justify-content: center;
            align-items: center;
        }

        .button-row {
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
        }

        .nav-button {
            color: var(--text);
            border: none;
            padding: 20px 35px;
            font-size: 1.5em;
            font-weight: 700;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 180px;
            height: 65px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-shadow: 0 0 10px rgba(137, 162, 97, 0.5), 0 0 20px rgba(137, 162, 97, 0.3), 0 0 30px rgba(137, 162, 97, 0.2);
        }

        .nav-button.explore-btn {
            background: var(--primary);
            box-shadow: 0 4px 15px rgba(137, 162, 97, 0.3);
            min-width: 280px;
        }

        .nav-button.read-btn {
            background: var(--secondary);
            box-shadow: 0 4px 15px rgba(167, 203, 171, 0.3);
        }

        .nav-button.read-btn:hover {
            background: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(137, 186, 154, 0.4);
        }

        .nav-button.quiz-btn {
            background: var(--accent);
            box-shadow: 0 4px 15px rgba(137, 186, 154, 0.3);
        }

        .nav-button.quiz-btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(167, 203, 171, 0.4);
        }

        .nav-button.explore-btn {
            background: var(--primary);
            box-shadow: 0 4px 15px rgba(137, 162, 97, 0.3);
        }

        .nav-button.explore-btn:hover {
            background: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(137, 186, 154, 0.4);
        }

        .home-title {
            font-size: 3.5em;
            font-weight: bold;
            margin-bottom: 20px;
            color: var(--text);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            animation: fadeInUp 1s ease-out;
        }

        .home-subtitle {
            font-size: 1.3em;
            margin-bottom: 40px;
            color: var(--text);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
            opacity: 0.9;
            animation: fadeInUp 1s ease-out 0.3s both;
        }

        .read-button {
            background: var(--primary);
            color: var(--text);
            border: none;
            padding: 18px 40px;
            font-size: 1.4em;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 2px;
            box-shadow: 0 8px 25px rgba(137, 162, 97, 0.4);
            animation: fadeInUp 1s ease-out 0.6s both;
        }

        .read-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(137, 186, 154, 0.6);
            background: var(--accent);
        }

        .read-button:active {
            transform: translateY(-1px);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Hide flipbook initially */
        .flipbook-container {
            max-width: 900px;
            width: 100%;
            background: var(--background);
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            position: relative;
            display: none;
        }

        .book-header {
            background: var(--primary);
            color: var(--text);
            padding: 15px 20px;
            text-align: center;
            position: relative;
        }

        .book-title {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .page-counter {
            font-size: 1em;
            opacity: 0.9;
        }

        .page-display {
            position: relative;
            width: 100%;
            height: 70vh;
            min-height: 400px;
            background: var(--background);
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .btn.side-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.2);
            color: var(--text);
            border: 2px solid var(--secondary);
            padding: 15px 20px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 24px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(148, 213, 216, 0.2);
            min-width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            z-index: 10;
        }

        .btn.side-nav:hover {
            background: var(--secondary);
            border-color: var(--primary);
            transform: translateY(-50%) translateX(0) scale(1.1);
            box-shadow: 0 6px 20px rgba(148, 213, 216, 0.4);
        }

        .btn.side-nav:disabled {
            background: rgba(255, 255, 255, 0.1);
            color: rgba(10, 29, 11, 0.3);
            border-color: rgba(148, 213, 216, 0.2);
            cursor: not-allowed;
            transform: translateY(-50%);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .left-nav {
            left: 20px;
        }

        .right-nav {
            right: 20px;
        }

        .page-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .page {
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
            object-fit: contain;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
            transform: translateX(50px);
        }

        .page.active {
            opacity: 1;
            transform: translateX(0);
        }

        .page.prev {
            transform: translateX(-50px);
        }

        .loading-indicator {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: none;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .controls {
            background: linear-gradient(135deg, rgba(148, 213, 216, 0.1), rgba(109, 175, 202, 0.1));
            padding: 25px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 40px;
            backdrop-filter: blur(10px);
            border-top: 2px solid rgba(148, 213, 216, 0.2);
            min-height: 80px;
        }

        /* RTL Support for Arabic */
        .flipbook-container.rtl {
            direction: rtl;
        }

        .flipbook-container.rtl .book-header {
            text-align: right;
        }

        .flipbook-container.rtl .controls {
            direction: rtl;
        }

        /* RTL Support for side navigation */
        .flipbook-container.rtl .left-nav {
            left: auto;
            right: 20px;
        }

        .flipbook-container.rtl .right-nav {
            right: auto;
            left: 20px;
        }

        .flipbook-container.rtl .nav-buttons {
            flex-direction: row-reverse;
        }

        .flipbook-container.rtl .page-counter {
            direction: rtl;
        }

        /* RTL Navigation - swap prev/next button positions */
        .flipbook-container.rtl .nav-buttons .btn:first-child {
            order: 2;
        }

        .flipbook-container.rtl .nav-buttons .btn:last-child {
            order: 1;
        }

        /* Match website styling - Enhanced flipbook design */
        .flipbook-container {
            max-width: 900px;
            width: 100%;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(148, 213, 216, 0.1));
            border-radius: 25px;
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            position: relative;
            display: none;
            backdrop-filter: blur(20px);
            border: 2px solid rgba(148, 213, 216, 0.3);
        }

        .book-header {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: var(--text);
            padding: 20px 25px;
            text-align: center;
            position: relative;
            box-shadow: 0 4px 20px rgba(255, 168, 102, 0.3);
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 2px solid rgba(148, 213, 216, 0.3);
        }

        .book-header .back-to-home-btn {
            background: rgba(255, 255, 255, 0.2);
            color: var(--text);
            border: 2px solid var(--secondary);
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
            font-weight: bold;
            backdrop-filter: blur(10px);
            flex-shrink: 0;
        }

        .book-header {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: var(--text);
            padding: 20px 25px;
            text-align: center;
            position: relative;
            box-shadow: 0 4px 20px rgba(255, 168, 102, 0.3);
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 2px solid rgba(148, 213, 216, 0.3);
        }

        .book-header .back-to-home-btn {
            background: rgba(255, 255, 255, 0.2);
            color: var(--text);
            border: 2px solid var(--secondary);
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
            font-weight: bold;
            backdrop-filter: blur(10px);
            flex-shrink: 0;
        }

        .book-header .back-to-home-btn:hover {
            background: var(--secondary);
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(137, 186, 154, 0.2);
        }

        .read-aloud-header-btn {
            background: rgba(255, 255, 255, 0.2);
            color: var(--text);
            border: 2px solid var(--secondary);
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
            font-weight: bold;
            backdrop-filter: blur(10px);
            flex-shrink: 0;
        }

        .read-aloud-header-btn:hover {
            background: var(--secondary);
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(137, 186, 154, 0.2);
        }

        .book-title {
            font-size: 1.6em;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
            flex: 1;
            text-align: center;
            margin: 0 20px;
        }

        .page-counter {
            font-size: 0.9em;
            opacity: 0.9;
            font-weight: 500;
            position: absolute;
            left: 50%;
            bottom: -25px;
            transform: translateX(-50%);
        }
            position: absolute;
            left: 50%;
            bottom: -5px;
            transform: translateX(-50%);
            font-size: 0.9em;
        }

        /* RTL adjustments for back button */
        .flipbook-container.rtl .book-header .back-to-home-btn {
            order: 3;
        }

        .controls {
            background: linear-gradient(135deg, rgba(148, 213, 216, 0.1), rgba(109, 175, 202, 0.1));
            padding: 25px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 40px;
            backdrop-filter: blur(10px);
            border-top: 2px solid rgba(148, 213, 216, 0.2);
        }

        .nav-buttons {
            display: flex;
            gap: 40px;
            align-items: center;
        }

        .btn.minimal-nav {
            background: rgba(255, 255, 255, 0.2);
            color: var(--text);
            border: 2px solid var(--secondary);
            padding: 15px 20px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 24px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(148, 213, 216, 0.2);
            min-width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }

        .btn.minimal-nav:hover {
            background: var(--secondary);
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(148, 213, 216, 0.4);
        }

        .btn.minimal-nav:disabled {
            background: rgba(255, 255, 255, 0.1);
            color: rgba(10, 29, 11, 0.3);
            border-color: rgba(148, 213, 216, 0.2);
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .end-options {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
        }

        /* Quiz button styles removed - now uses minimal-nav class */

        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .page-display {
                height: 60vh;
                min-height: 300px;
            }

            .controls {
                flex-direction: column;
                text-align: center;
            }

            .nav-buttons {
                justify-content: center;
                width: 100%;
            }

            .btn {
                flex: 1;
                max-width: 120px;
            }

            .book-title {
                font-size: 1.2em;
            }

            .fullscreen-btn {
                position: static;
                transform: none;
                margin-top: 10px;
            }
        }

        @media (max-width: 480px) {
            .page-display {
                height: 50vh;
                min-height: 250px;
            }

            .btn {
                padding: 10px 15px;
                font-size: 0.9em;
            }
        }

        /* Touch gesture indicators */
        .swipe-hint {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            color: #7f8c8d;
            font-size: 0.8em;
            opacity: 0.7;
        }
    </style>
</head>
<body>
    <!-- LEVEL SELECTION PAGE -->
    <div class="level-page" id="levelPage">
        <div class="level-title">
            <span class="level-title-en">Choose Your Level</span>
            <span class="level-title-ar" style="display: none;">Ø§Ø®ØªØ± Ù…Ø³ØªÙˆØ§Ùƒ</span>
        </div>
        
        <div class="level-subtitle">
            <!-- X Close Button -->
            <button class="close-btn" id="closeLevelPage">Ã—</button>
        </div>
        
        <div class="level-container">
            <div class="level-card" data-level="curious">
                <div class="level-age">6-12</div>
                <div class="level-name">
                    <span class="level-name-en">Young Explorers</span>
                    <span class="level-name-ar" style="display: none;">Ø§Ù„Ù…Ø³ØªÙƒØ´ÙÙˆÙ† Ø§Ù„ØµØºØ§Ø±</span>
                </div>
                <div class="story-title">
                    <span class="story-title-en">The Sun Sneezes</span>
                    <span class="story-title-ar" style="display: none;">Ø§Ù„Ø´Ù…Ø³ ØªØ¹Ø·Ø³</span>
                </div>

            </div>
            
            <div class="level-card" data-level="seekers">
                <div class="level-age">13-18</div>
                <div class="level-name">
                    <span class="level-name-en">Senior Explorers</span>
                    <span class="level-name-ar" style="display: none;">Ø§Ù„Ù…Ø³ØªÙƒØ´ÙÙˆÙ† Ø§Ù„ÙƒØ¨Ø§Ø±</span>
                </div>
                <div class="story-title">
                    <span class="story-title-en">Celeste's Story</span>
                    <span class="story-title-ar" style="display: none;">Ù‚ØµØ© Ø³ÙŠÙ„ÙŠØ³Øª</span>
                </div>

            </div>
        </div>
        
        <button class="back-to-home-btn" id="backToHomeFromLevel">
            <span class="back-home-en">Back to Home</span>
            <span class="back-home-ar" style="display: none;">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
        </button>
    </div>

    <!-- QUIZ LEVEL SELECTION PAGE -->
    <div class="level-page" id="quizLevelPage">
        <div class="level-title">
            <span class="level-title-en">Choose Your Quiz Level</span>
            <span class="level-title-ar" style="display: none;">Ø§Ø®ØªØ± Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</span>
        </div>
        
        <div class="level-subtitle">
            <!-- X Close Button -->
            <button class="close-btn" id="closeQuizLevelPage">Ã—</button>
        </div>
        
        <div class="level-container">
            <div class="quiz-level-card" data-quiz-level="curious">
                <div class="level-age">6-12</div>
                <div class="level-name">
                    <span class="level-name-en">Young Explorers</span>
                    <span class="level-name-ar" style="display: none;">Ø§Ù„Ù…Ø³ØªÙƒØ´ÙÙˆÙ† Ø§Ù„ØµØºØ§Ø±</span>
                </div>
                <div class="story-title">
                    <span class="story-title-en">The Sun Sneezes</span>
                    <span class="story-title-ar" style="display: none;">Ø§Ù„Ø´Ù…Ø³ ØªØ¹Ø·Ø³</span>
                </div>
                <div class="level-description">
                    <span class="level-desc-en">Basic story comprehension and simple science concepts</span>
                    <span class="level-desc-ar" style="display: none;">ÙÙ‡Ù… Ø£Ø³Ø§Ø³ÙŠ Ù„Ù„Ù‚ØµØ© ÙˆÙ…ÙØ§Ù‡ÙŠÙ… Ø¹Ù„Ù…ÙŠØ© Ø¨Ø³ÙŠØ·Ø©</span>
                </div>
                <div class="quiz-info">
                    <span class="quiz-info-en">ğŸ“ 5 questions â€¢ Multiple choice</span>
                    <span class="quiz-info-ar" style="display: none;">ğŸ“ Ù¥ Ø£Ø³Ø¦Ù„Ø© â€¢ Ø§Ø®ØªÙŠØ§Ø± Ù…ØªØ¹Ø¯Ø¯</span>
                </div>
            </div>
            
            <div class="quiz-level-card" data-quiz-level="seekers">
                <div class="level-age">13-18</div>
                <div class="level-name">
                    <span class="level-name-en">Senior Explorers</span>
                    <span class="level-name-ar" style="display: none;">Ø§Ù„Ù…Ø³ØªÙƒØ´ÙÙˆÙ† Ø§Ù„ÙƒØ¨Ø§Ø±</span>
                </div>
                <div class="story-title">
                    <span class="story-title-en">Celeste's Story</span>
                    <span class="story-title-ar" style="display: none;">Ù‚ØµØ© Ø³ÙŠÙ„ÙŠØ³Øª</span>
                </div>
                <div class="level-description">
                    <span class="level-desc-en">Deeper analysis and scientific understanding</span>
                    <span class="level-desc-ar" style="display: none;">ØªØ­Ù„ÙŠÙ„ Ø£Ø¹Ù…Ù‚ ÙˆÙÙ‡Ù… Ø¹Ù„Ù…ÙŠ</span>
                </div>
                <div class="quiz-info">
                    <span class="quiz-info-en">ğŸ“ 7 questions â€¢ Mixed format</span>
                    <span class="quiz-info-ar" style="display: none;">ğŸ“ Ù§ Ø£Ø³Ø¦Ù„Ø© â€¢ ØªÙ†Ø³ÙŠÙ‚ Ù…Ø®ØªÙ„Ø·</span>
                </div>
            </div>
        </div>
    </div>

    <!-- HOME PAGE -->
    <div class="home-page" id="homePage">
        <div class="home-overlay"></div>
        
        <!-- Language Selector -->
        <div class="language-selector">
            <button class="language-btn" id="englishBtn" data-lang="en">English</button>
                        <button class="language-btn" id="arabicBtn" data-lang="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
        </div>
        
        <div class="home-content">
            <div class="button-container">
                <div class="button-row">
                    <button class="nav-button read-btn" id="readButton">
                        <span class="btn-text-en">Read</span>
                        <span class="btn-text-ar" style="display: none;">Ø§Ù‚Ø±Ø£</span>
                    </button>
                    <button class="nav-button quiz-btn" id="quizButton">
                        <span class="btn-text-en">Quiz</span>
                        <span class="btn-text-ar" style="display: none;">Ø§Ø®ØªØ¨Ø§Ø±</span>
                    </button>
                </div>
                <button class="nav-button explore-btn" id="exploreButton">
                    <span class="btn-text-en">Explore Live Space Weather</span>
                    <span class="btn-text-ar" style="display: none;">Ø§Ø³ØªÙƒØ´Ù Ø·Ù‚Ø³ Ø§Ù„ÙØ¶Ø§Ø¡ Ø§Ù„Ø§Ù†</span>
                </button>
            </div>
        </div>
    </div>

    <!-- FLIPBOOK APPLICATION -->
    <div class="flipbook-container" id="flipbook">
        <div class="book-header">
            <button class="back-to-home-btn" id="backToHomeFromFlipbook">
                <span class="back-home-en">â† Back</span>
                <span class="back-home-ar" style="display: none;">â† Ø±Ø¬ÙˆØ¹</span>
            </button>
            <div class="book-title" id="bookTitle">Interactive Flipbook</div>
            <div class="page-counter" id="pageCounter">Page 1 of 10</div>
            <button class="read-aloud-header-btn" id="readAloudBtn">
                <span class="read-aloud-en">Read Aloud</span>
                <span class="read-aloud-ar" style="display: none;">Ø§Ù‚Ø±Ø£ Ø¨ØµÙˆØª Ø¹Ø§Ù„Ù</span>
            </button>
        </div>

        <div class="page-display">
            <button class="btn side-nav left-nav" id="prevBtn">
                <span class="prev-en"><</span>
                <span class="prev-ar" style="display: none;">></span>
            </button>
            <div class="page-container" id="pageContainer">
                <!-- Pages will be dynamically inserted here -->
            </div>
            <button class="btn side-nav right-nav" id="nextBtn">
                <span class="next-en">></span>
                <span class="next-ar" style="display: none;"><</span>
            </button>
            <div class="loading-indicator" id="loadingIndicator">
                <div class="spinner"></div>
            </div>
        </div>

        <div class="controls">
            <!-- Navigation buttons moved to page-display area -->
        </div>

        <!-- Quiz button that appears after last page -->
        <div class="end-options" id="endOptions" style="display: none;">
            <button class="btn minimal-nav" id="goToQuizBtn">
                <span class="quiz-en">Take Quiz ğŸ“</span>
                <span class="quiz-ar" style="display: none;">Ø®Ø° Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ğŸ“</span>
            </button>
        </div>
    </div>

    <script>
        // ========================================
        // IMAGE CONFIGURATION SECTION
        // ========================================
        // ğŸ“ INSTRUCTIONS FOR ADDING YOUR IMAGES:
        // 1. Replace the example filenames below with your actual image files
        // 2. You can use local files (e.g., "page1.jpg") or full URLs
        // 3. Make sure all images are in the same folder as this HTML file (for local files)
        // 4. Supported formats: JPG, PNG, GIF, WebP
        // 5. To add more pages: just add more filenames to this array
        // 6. To remove pages: delete the corresponding lines
        
        // Level-specific page arrays with language support
        const levelPages = {
            'curious': {
                'en': [
                    "page1eng.jpeg",
                    "page2eng.jpeg", 
                    "page3eng.jpeg",
                    "page4eng.jpeg",
                    "page5eng.jpeg",
                    "page6eng.jpeg",
                    "page7eng.jpeg",
                    "page8eng.jpeg",
                    "page9eng.jpeg",
                    "page10eng.jpeg"
                ],
                'ar': [
                    "page1arbc.jpeg",
                    "page3arbc.jpeg",
                    "page2arbc.jpeg",
                    "page4arbc.jpeg",
                    "page5arbc.jpeg",
                    "page6arbc.jpeg",
                    "page7arbc.jpeg",
                    "page8arbc.jpeg",
                    "page9arbc.jpeg",
                    "page10arbc.jpeg"
                ]
            },
            'seekers': {
                'en': [
                    "coverfotoeng.jpeg",
                    "page111.jpeg",
                    "page222.jpeg",
                    "page333.jpeg",
                    "page444.jpeg",
                    "page555.jpeg",
                    "page666.jpeg",
                    "page777.jpeg",
                    "page888.jpeg",
                    "page999.jpeg"
                ],
                'ar': [
                    "coverfotoarbc.jpeg",
                    "safha1.jpeg",
                    "safha2.jpeg",
                    "safha3.jpeg",
                    "safha4.jpeg",
                    "safha5.jpeg",
                    "safha6.jpeg",
                    "safha7.jpeg",
                    "safha8.jpeg",
                    "safha9.jpeg"
                ]
            }
        };

        // Get pages based on selected level and language
        function getBookPages() {
            const selectedLevel = window.selectedLevel || 'curious';
            
            // Check multiple ways to determine language
            const arabicBtn = document.getElementById('arabicBtn');
            const isArabicFromBtn = arabicBtn && arabicBtn.classList.contains('active');
            const isArabicFromGlobal = window.currentLanguage === 'ar';
            const isArabic = isArabicFromBtn || isArabicFromGlobal;
            
            const language = isArabic ? 'ar' : 'en';
            
            console.log(`ğŸŒ Language detection: ${language}, Level: ${selectedLevel}`);
            console.log(`ğŸ” Arabic button active:`, isArabicFromBtn);
            console.log(`ğŸ” Global language:`, window.currentLanguage);
            
            const levelData = levelPages[selectedLevel];
            if (levelData && levelData[language]) {
                console.log(`ğŸ“š Loading ${language} pages for ${selectedLevel}:`, levelData[language]);
                return levelData[language];
            }
            
            // Fallback to English if Arabic not available, then to young explorers English
            const fallback = (levelData && levelData['en']) || levelPages['curious']['en'];
            console.log(`âš ï¸ Using fallback pages:`, fallback);
            return fallback;
        }

        // Legacy bookPages for backward compatibility
        const bookPages = [
            // ğŸ–¼ï¸ ADD YOUR IMAGE FILENAMES HERE:
            // Replace these example names with your actual image files
            "page1.jpg",      // Page 1
            "page2.jpg",      // Page 2  
            "page3.jpg",      // Page 3
            "page4.jpg",      // Page 4
            "page5.jpg",      // Page 5
            "page6.jpg",      // Page 6
            "page7.jpg",      // Page 7
            "page8.jpg",      // Page 8
            "page9.jpg",      // Page 9
            "page10.jpg",     // Page 10
            "page11.jpg",     // Page 11
            "page12.jpg",     // Page 12
            "page13.jpg",     // Page 13
            "page14.jpg",     // Page 14
            "page15.jpg",     // Page 15
            
            // ğŸ“‹ TO ADD MORE PAGES: 
            // Uncomment and modify the lines below, or add new ones
            // "page16.jpg",     // Page 16
            // "page17.jpg",     // Page 17
            // "page18.jpg",     // Page 18
            // "page19.jpg",     // Page 19
            // "page20.jpg",     // Page 20
        ];

        // ========================================
        // CUSTOMIZATION SETTINGS
        // ========================================
        const settings = {
            // ğŸ¨ ANIMATION SPEED (in milliseconds)
            // Lower = faster, Higher = slower
            animationSpeed: 500,
            
            // ğŸ“– BOOK TITLE (appears at the top)
            bookTitle: "My Interactive Flipbook",
            
            // ğŸ¯ AUTO-HIDE CONTROLS (in milliseconds, 0 = never hide)
            autoHideControls: 0,
            
            // ğŸ“± ENABLE TOUCH GESTURES
            enableTouchGestures: true,
            
            // âŒ¨ï¸ ENABLE KEYBOARD NAVIGATION  
            enableKeyboardNav: true
        };

        // ========================================
        // APPLICATION CODE (Don't modify unless you know what you're doing)
        // ========================================
        
        class FlipbookApp {
            constructor() {
                // Get pages based on selected level
                const currentBookPages = getBookPages();
                
                this.currentPage = 0;
                this.totalPages = currentBookPages.length;
                this.bookPages = currentBookPages;
                this.isAnimating = false;
                this.touchStartX = 0;
                this.touchEndX = 0;
                
                this.initializeElements();
                this.createPages();
                this.setupEventListeners();
                this.updateDisplay();
                this.preloadImages();
            }

            initializeElements() {
                this.flipbook = document.getElementById('flipbook');
                this.pageContainer = document.getElementById('pageContainer');
                this.prevBtn = document.getElementById('prevBtn');
                this.nextBtn = document.getElementById('nextBtn');
                this.readAloudBtn = document.getElementById('readAloudBtn');
                this.backToHomeBtn = document.getElementById('backToHomeFromFlipbook');
                this.goToQuizBtn = document.getElementById('goToQuizBtn');
                this.endOptions = document.getElementById('endOptions');
                this.loadingIndicator = document.getElementById('loadingIndicator');
            }

            createPages() {
                this.pageContainer.innerHTML = '';
                
                this.bookPages.forEach((imageSrc, index) => {
                    const img = document.createElement('img');
                    img.src = imageSrc;
                    img.alt = `Page ${index + 1}`;
                    img.className = 'page';
                    img.style.display = 'none';
                    
                    img.onload = () => {
                        if (index === this.currentPage) {
                            this.showPage(index);
                        }
                    };
                    
                    img.onerror = () => {
                        console.warn(`Failed to load image: ${imageSrc}`);
                        // Create a placeholder for missing images
                        const placeholder = document.createElement('div');
                        placeholder.className = 'page';
                        placeholder.style.cssText = `
                            width: 400px; height: 300px; background: #f0f0f0; 
                            display: flex; align-items: center; justify-content: center;
                            border: 2px dashed #ccc; color: #666; font-size: 1.1em;
                        `;
                        placeholder.textContent = `Page ${index + 1}\n(Image not found)`;
                        img.replaceWith(placeholder);
                    };
                    
                    this.pageContainer.appendChild(img);
                });
            }

            setupEventListeners() {
                // Navigation buttons
                this.prevBtn.addEventListener('click', () => this.previousPage());
                this.nextBtn.addEventListener('click', () => this.nextPage());
                
                // Read aloud button
                this.readAloudBtn.addEventListener('click', () => this.readCurrentPage());
                
                // Back to home button
                this.backToHomeBtn.addEventListener('click', () => this.goBackToHome());

                // Quiz button
                this.goToQuizBtn.addEventListener('click', () => this.goToQuiz());

                // Keyboard navigation
                if (settings.enableKeyboardNav) {
                    document.addEventListener('keydown', (e) => {
                        if (e.key === 'ArrowLeft') this.previousPage();
                        if (e.key === 'ArrowRight') this.nextPage();
                        if (e.key === ' ') { // Spacebar for read aloud
                            e.preventDefault();
                            this.readCurrentPage();
                        }
                    });
                }

                // Touch gestures
                if (settings.enableTouchGestures) {
                    this.pageContainer.addEventListener('touchstart', (e) => {
                        this.touchStartX = e.changedTouches[0].screenX;
                    });

                    this.pageContainer.addEventListener('touchend', (e) => {
                        this.touchEndX = e.changedTouches[0].screenX;
                        this.handleSwipe();
                    });
                }
            }

            handleSwipe() {
                const swipeThreshold = 50;
                const diff = this.touchStartX - this.touchEndX;
                
                if (Math.abs(diff) > swipeThreshold) {
                    if (diff > 0) {
                        this.nextPage(); // Swipe left = next page
                    } else {
                        this.previousPage(); // Swipe right = previous page
                    }
                }
            }

            showLoading() {
                this.loadingIndicator.style.display = 'block';
            }

            hideLoading() {
                this.loadingIndicator.style.display = 'none';
            }

            showPage(pageIndex) {
                const pages = this.pageContainer.querySelectorAll('.page');
                
                pages.forEach((page, index) => {
                    page.style.display = 'none';
                    page.classList.remove('active', 'prev');
                });

                if (pages[pageIndex]) {
                    pages[pageIndex].style.display = 'block';
                    setTimeout(() => {
                        pages[pageIndex].classList.add('active');
                    }, 10);
                }
                
                this.hideLoading();
            }

            readCurrentPage() {
                // Stop any current speech
                if (window.speechSynthesis.speaking) {
                    window.speechSynthesis.cancel();
                    this.updateReadAloudButton(false);
                    return;
                }

                const isArabic = document.getElementById('arabicBtn') && document.getElementById('arabicBtn').classList.contains('active');
                const pageText = this.getPageText(this.currentPage, isArabic);
                
                if (!pageText) {
                    console.warn('No text available for current page');
                    return;
                }

                // Create speech synthesis utterance
                const utterance = new SpeechSynthesisUtterance(pageText);
                
                // Set language
                utterance.lang = isArabic ? 'ar-SA' : 'en-US';
                
                // Set voice properties
                utterance.rate = 0.8; // Slightly slower for better comprehension
                utterance.pitch = 1.0;
                utterance.volume = 1.0;

                // Event handlers
                utterance.onstart = () => {
                    this.updateReadAloudButton(true);
                };

                utterance.onend = () => {
                    this.updateReadAloudButton(false);
                };

                utterance.onerror = (event) => {
                    console.error('Speech synthesis error:', event.error);
                    this.updateReadAloudButton(false);
                };

                // Start speaking
                window.speechSynthesis.speak(utterance);
            }

            updateReadAloudButton(isReading) {
                const readAloudBtn = this.readAloudBtn;
                const isArabic = document.getElementById('arabicBtn') && document.getElementById('arabicBtn').classList.contains('active');
                
                if (isReading) {
                    readAloudBtn.querySelector('.read-aloud-en').textContent = 'Stop';
                    readAloudBtn.querySelector('.read-aloud-ar').textContent = 'ØªÙˆÙ‚Ù';
                    readAloudBtn.style.background = 'linear-gradient(135deg, #ff6b6b, #ee5a52)';
                } else {
                    readAloudBtn.querySelector('.read-aloud-en').textContent = 'Read Aloud';
                    readAloudBtn.querySelector('.read-aloud-ar').textContent = 'Ø§Ù‚Ø±Ø£ Ø¨ØµÙˆØª Ø¹Ø§Ù„Ù';
                    readAloudBtn.style.background = 'rgba(255, 255, 255, 0.2)';
                }
            }

            getPageText(pageIndex, isArabic) {
                const selectedLevel = window.selectedLevel || 'curious';
                
                // Text content organized by level and language
                const textContent = {
                    'curious': {
                        'ar': {
                            0: "Ø§Ù„Ø´ÙÙ‘Ù…Ù’Ø³Ù ØªÙØ¹Ù’Ø·ÙØ³Ù",
                            1: "ÙƒÙÙ†Ù’ØªÙ Ø£ÙØ¹ÙÙŠØ´Ù Ø¹ÙÙ„ÙÙ‰ Ø£ÙÙƒÙ’Ø¨ÙØ±Ù ÙˆÙØ£ÙÙ„Ù’Ù…ÙØ¹Ù Ù†ÙØ¬Ù’Ù…Ù ÙÙÙŠ Ø³ÙÙ…ÙØ§Ø¦ÙÙ†ÙØ§: Ø§Ù„Ø´ÙÙ‘Ù…Ù’Ø³Ù. ÙƒÙØ§Ù†Ù Ù‡ÙØ°ÙØ§ Ù‡ÙÙˆÙ Ø¨ÙÙŠÙ’ØªÙÙŠ! Ø«ÙÙ…ÙÙ‘ØŒ ÙÙÙŠ ØµÙØ¨ÙØ§Ø­Ù Ø£ÙØ­ÙØ¯Ù Ø§Ù„Ù’Ø£ÙÙŠÙÙ‘Ø§Ù…ÙØŒ Ø´ÙØ¹ÙØ±Ù’ØªÙ Ø¨ÙØ¯ÙØºÙ’Ø¯ÙØºÙØ©Ù Ù†ÙØ§Ø±ÙÙŠÙÙ‘Ø©Ù Ø¹ÙÙ…Ù’Ù„ÙØ§Ù‚ÙØ©Ù Ø¨ÙØ¯ÙØ£ÙØªÙ’ Ø¹ÙÙ…ÙÙŠÙ‚Ù‹Ø§ ÙÙÙŠ Ø¯ÙØ§Ø®ÙÙ„ÙÙŠ.",
                            2: "ØªÙÙ…Ù’ØªÙÙ…ÙØªÙ Ø§Ù„Ø´ÙÙ‘Ù…Ù’Ø³Ù Ù‚ÙØ§Ø¦ÙÙ„ÙØ©Ù‹: Ù‡ÙØ§... Ù‡ÙØ§... Ù‡ÙØ§... Ù‡Ø§ØªØ´ÙˆÙˆÙˆ! Ø£ÙØ·Ù’Ù„ÙÙ‚ÙØªÙ Ø§Ù„Ø´ÙÙ‘Ù…Ù’Ø³Ù Ø¹ÙØ·Ù’Ø³ÙØ©Ù‹ Ø¹ÙÙ…Ù’Ù„ÙØ§Ù‚ÙØ©Ù‹ØŒ ÙˆÙÙÙØ¬Ù’Ø£ÙØ©Ù‹ØŒ ÙˆÙØ¬ÙØ¯Ù’ØªÙ Ù†ÙÙÙ’Ø³ÙÙŠ Ø£ÙØ·ÙÙŠØ±Ù!",
                            3: "ÙƒÙÙ†Ù’ØªÙ Ù‚ÙØ·Ù’Ø¹ÙØ©Ù‹ ØµÙØºÙÙŠØ±ÙØ©Ù‹ ÙˆÙØ¶ÙØ§Ø­ÙÙƒÙØ©Ù‹ Ù…ÙÙ†Ù’ ØªÙÙ„Ù’ÙƒÙ Ø§Ù„Ù’Ø¹ÙØ·Ù’Ø³ÙØ©ÙØŒ ÙˆÙØ§Ø³Ù’Ù…ÙÙŠ Ù‡ÙÙˆÙ Ø´ÙØ±ÙØ§Ø±ÙØ©Ù. Ø·ÙØ±Ù’ØªÙ Ù…ÙØ¨ÙØ§Ø´ÙØ±ÙØ©Ù‹ Ø¥ÙÙ„ÙÙ‰ Ø§Ù„Ù’ÙÙØ¶ÙØ§Ø¡Ù! ØµÙØ±ÙØ®Ù’ØªÙ: ÙˆÙÙŠÙÙŠÙÙŠ! ÙŠÙØ§ Ù„ÙÙ‡ÙØ§ Ù…ÙÙ†Ù’ Ù…ÙØºÙØ§Ù…ÙØ±ÙØ©Ù Ø³ÙØªÙÙƒÙÙˆÙ†Ù!",
                            4: "Ù…ÙØ­ÙØ·ÙÙ‘ØªÙÙŠ Ø§Ù„Ù’Ø£ÙÙˆÙ„ÙÙ‰: Ø§Ù„Ù’Ø£ÙÙ‚Ù’Ù…ÙØ§Ø±Ù Ø§Ù„ØµÙÙ‘Ù†ÙØ§Ø¹ÙÙŠÙÙ‘Ø©Ù. Ø§Ù†Ù’Ø·ÙÙ„ÙÙ‚Ù’ØªÙ Ø¨ÙØ¬ÙÙˆÙØ§Ø±ÙÙ‡ÙØ§ ÙˆÙØ¯ÙØºÙ’Ø¯ÙØºÙ’ØªÙÙ‡ÙØ§ Ù‚ÙÙ„ÙÙŠÙ„Ù‹Ø§. Ø¨ÙØ¯ÙØ£ÙØªÙ’ ØªÙØ¯ÙÙˆØ±Ù ÙˆÙØ´ÙØ¹ÙØ±ÙØªÙ’ Ø¨ÙØ§Ù„Ø¯ÙÙ‘ÙˆÙØ§Ø±Ù! Ø±ÙØ£ÙØªÙ’Ù‡ÙÙ…Ù’ Ø¹ÙØ§Ù„ÙÙ…ÙØ©ÙŒ Ø¹ÙÙ„ÙÙ‰ Ø§Ù„Ù’Ø£ÙØ±Ù’Ø¶Ù ÙˆÙÙ‡ÙÙ…Ù’ ÙŠÙØªÙØ£ÙØ±Ù’Ø¬ÙØ­ÙÙˆÙ†Ù. Ø£ÙØ±Ù’Ø³ÙÙ„ÙØªÙ’ Ø¥ÙØ´ÙØ§Ø±ÙØ©Ù‹ Ù„ÙÙ„Ù’Ù…ÙØ³ÙØ§Ø¹ÙØ¯ÙØ©Ù ÙÙÙŠ Ø¥ÙØµÙ’Ù„ÙØ§Ø­ÙÙ‡ÙÙ…Ù’. Ù‚ÙØ§Ù„ÙØªÙ’: ÙƒÙÙ„ÙÙ‘ Ø´ÙÙŠÙ’Ø¡Ù Ø£ÙÙÙ’Ø¶ÙÙ„Ù!ØŒ ÙˆÙÙˆÙØ§ØµÙÙ„Ù’ØªÙ Ø·ÙØ±ÙÙŠÙ‚ÙÙŠ",
                            5: "Ø¨ÙØ¹Ù’Ø¯Ù Ø°ÙÙ„ÙÙƒÙØŒ Ø§Ù†Ù’Ø·ÙÙ„ÙÙ‚Ù’ØªÙ Ø¨ÙØ³ÙØ±Ù’Ø¹ÙØ©Ù ÙˆÙØ¯ÙØºÙ’Ø¯ÙØºÙ’ØªÙ Ø®ÙØ·ÙÙˆØ·Ù Ø§Ù„Ù’ÙƒÙÙ‡Ù’Ø±ÙØ¨ÙØ§Ø¡Ù Ø§Ù„Ù’ÙƒÙØ¨ÙÙŠØ±ÙØ©Ù. ØªÙÙ„ÙÙˆÙÙ‘ØªÙ Ø§Ù„Ù’Ø®ÙØ·ÙÙˆØ·ÙØŒ ÙˆÙØ¨ÙÙˆÙÙˆÙÙ’! Ø§Ù†Ù’Ø·ÙÙÙØ£ÙØªÙ Ø§Ù„Ù’Ø£ÙØ¶Ù’ÙˆÙØ§Ø¡Ù! Ø¬ÙØ§Ø¡ÙØªÙ’ Ø¹ÙØ§Ù…ÙÙ„ÙØ©ÙŒ ÙÙÙŠ Ø´ÙØ§Ø­ÙÙ†ÙØ©Ù ÙƒÙØ¨ÙÙŠØ±ÙØ©Ù Ø¨ÙØ³ÙØ±Ù’Ø¹ÙØ©Ù. Ø³ÙØ§Ø¹ÙØ¯ÙØªÙ’ ÙÙÙŠ Ø¥ÙØµÙ’Ù„ÙØ§Ø­Ù Ø§Ù„Ù’ÙƒÙÙ‡Ù’Ø±ÙØ¨ÙØ§Ø¡Ù. Ù‡ÙØªÙÙÙØªÙ’: Ù„ÙÙ‚ÙØ¯Ù’ Ø£ÙØ¶ÙÙŠØ¦ÙØªÙ’! ÙƒÙÙ†Ù’ØªÙ Ø£ÙØªÙØ³ÙØ¨ÙÙ‘Ø¨Ù ÙÙÙŠ ÙƒÙÙ„ÙÙ‘ Ø£ÙÙ†Ù’ÙˆÙØ§Ø¹Ù Ø§Ù„Ù’Ù…ÙØ´ÙØ§ØºÙØ¨ÙØ©Ù!",
                            6: "Ø­ÙØ§ÙˆÙÙ„Ù’ØªÙ Ø§Ù„Ø±ÙÙ‘Ù‚Ù’ØµÙ Ø¯ÙØ§Ø®ÙÙ„Ù Ù…ÙØ­ÙØ·ÙÙ‘Ø©Ù Ø§Ù„Ù’ÙÙØ¶ÙØ§Ø¡ÙØŒ Ù„ÙÙƒÙÙ†Ù’ Ù„ÙÙ…Ù’ Ø£ÙØ³Ù’ØªÙØ·ÙØ¹Ù Ø§Ù„Ø¯ÙÙ‘Ø®ÙÙˆÙ„Ù! ÙƒÙØ§Ù†Ù Ø±ÙÙˆÙÙ‘Ø§Ø¯Ù Ø§Ù„Ù’ÙÙØ¶ÙØ§Ø¡Ù Ø¢Ù…ÙÙ†ÙÙŠÙ†Ù ÙÙÙŠ Ø§Ù„Ø¯ÙÙ‘Ø§Ø®ÙÙ„Ù. Ù…ÙØ­ÙØ·ÙÙ‘Ø©Ù Ø§Ù„Ù’ÙÙØ¶ÙØ§Ø¡Ù Ø§Ù„Ù’Ø®ÙØ§ØµÙÙ‘Ø©Ù Ø¨ÙÙ‡ÙÙ…Ù’ Ø¹ÙØ¨ÙØ§Ø±ÙØ©ÙŒ Ø¹ÙÙ†Ù’ Ù…ÙÙ†Ù’Ø²ÙÙ„Ù ÙÙØ§Ø¦ÙÙ‚Ù Ø§Ù„Ù’Ù‚ÙÙˆÙÙ‘Ø©ÙØŒ Ø¨ÙÙ†ÙÙŠÙ Ù„ÙØ­ÙÙ…ÙØ§ÙŠÙØªÙÙ‡ÙÙ…Ù’ Ù…ÙÙ†Ù’ ÙƒÙÙ„ÙÙ‘ Ø¹ÙØ·ÙØ³ÙØ§ØªÙ Ø§Ù„Ø´ÙÙ‘Ù…Ù’Ø³Ù. Ù„ÙÙˆÙÙ‘Ø­ÙÙˆØ§ Ù„ÙÙŠ ØªÙØ±Ù’Ø­ÙÙŠØ¨Ù‹Ø§ Ù…ÙÙ†Ù’ Ø­ÙØµÙ’Ù†ÙÙ‡ÙÙ…Ù Ø§Ù„Ù’Ù…ÙØ±ÙÙŠØ­Ù.",
                            7: "Ù…ÙØ±ÙØ±Ù’ØªÙ Ø¨ÙØ³ÙØ±Ù’Ø¹ÙØ©Ù Ø¨ÙØ¬ÙØ§Ù†ÙØ¨Ù Ø·ÙØ§Ø¦ÙØ±ÙØ©Ù ÙÙÙŠ Ø§Ù„Ø³ÙÙ‘Ù…ÙØ§Ø¡Ù. Ø¯ÙØºÙ’Ø¯ÙØºÙ’ØªÙ Ø¬ÙÙ‡ÙØ§Ø²Ù Ø§Ù„Ø±ÙÙ‘Ø§Ø¯Ù’ÙŠÙÙˆ Ø§Ù„Ù’Ø®ÙØ§ØµÙÙ‘ Ø¨ÙØ§Ù„Ø·ÙÙ‘ÙŠÙÙ‘Ø§Ø±Ù Ø¨ÙØ³ÙØ±Ù’Ø¹ÙØ©Ù. Ø·ÙÙ†ÙÙŠÙ†ÙŒ... Ø·ÙÙ†ÙÙŠÙ†ÙŒ... ØµÙØ¯ÙØ±Ù ØµÙÙˆÙ’ØªÙ Ø§Ù„Ø±ÙÙ‘Ø§Ø¯Ù’ÙŠÙÙˆ. Ù„ÙÙƒÙÙ†ÙÙ‘ Ø§Ù„Ø·ÙÙ‘ÙŠÙÙ‘Ø§Ø±Ù Ø¨ÙÙ‚ÙÙŠÙ Ù‡ÙØ§Ø¯ÙØ¦Ù‹Ø§ ØªÙÙ…ÙØ§Ù…Ù‹Ø§. ÙƒÙØ§Ù†Ù ÙŠÙØ¹Ù’Ø±ÙÙÙ Ø¨ÙØ§Ù„Ø¶ÙÙ‘Ø¨Ù’Ø·Ù Ù…ÙØ§ ÙŠÙØ¬ÙØ¨Ù ÙÙØ¹Ù’Ù„ÙÙ‡Ù Ù„ÙÙ…ÙÙˆÙØ§ØµÙÙ„ÙØ©Ù Ø§Ù„Ø·ÙÙ‘ÙŠÙØ±ÙØ§Ù†Ù Ø¨ÙØ£ÙÙ…ÙØ§Ù†Ù.",
                            8: "ÙˆÙØµÙÙ„Ù’ØªÙ Ø¥ÙÙ„ÙÙ‰ Ø¬ÙØ±ÙÙ‘Ø§Ø±Ù Ø²ÙØ±ÙØ§Ø¹ÙÙŠÙÙ‘ ÙÙÙŠ Ø­ÙÙ‚Ù’Ù„Ù. Ø¯ÙØºÙ’Ø¯ÙØºÙ’ØªÙ Ø´ÙØ§Ø´ÙØ©Ù Ø§Ù„Ù’Ø®ÙØ±ÙÙŠØ·ÙØ©Ù Ø§Ù„Ù’Ø®ÙØ§ØµÙÙ‘Ø©Ù Ø¨ÙÙ‡ÙØŒ ÙˆÙØ£ÙØµÙ’Ø¨ÙØ­ÙØªÙ’ ÙÙØ§Ø±ÙØºÙØ©Ù‹! Ø§Ø¨Ù’ØªÙØ³ÙÙ…Ù Ø§Ù„Ù’Ù…ÙØ²ÙØ§Ø±ÙØ¹Ù Ø²ÙÙŠÙ’Ù†ÙŒ ÙÙÙ‚ÙØ·Ù’. Ù‚ÙØ§Ù„Ù: Ø­ÙØ§Ù†Ù Ø§Ù„Ù’ÙˆÙÙ‚Ù’ØªÙ Ù„ÙØ£ÙÙ‚ÙÙˆØ¯Ù Ø¨ÙÙ†ÙÙÙ’Ø³ÙÙŠ! ÙˆÙÙˆÙØ§ØµÙÙ„Ù Ø§Ù„Ù’Ù‚ÙÙŠÙØ§Ø¯ÙØ©Ù Ø¨ÙØ´ÙÙƒÙ’Ù„Ù Ù…ÙØ«ÙØ§Ù„ÙÙŠÙÙ‘ØŒ Ø­ÙØªÙÙ‘Ù‰ Ø¨ÙØ¯ÙÙˆÙ†Ù Ø§Ù„Ø´ÙÙ‘Ø§Ø´ÙØ©Ù. Ø§Ù„Ù’Ø¨ÙØ´ÙØ±Ù Ø£ÙØ°Ù’ÙƒÙÙŠÙØ§Ø¡Ù Ø¬ÙØ¯Ù‹Ù‘Ø§!",
                            9: "ÙˆÙØ£ÙØ®ÙÙŠØ±Ù‹Ø§ØŒ Ø¨ÙØ¯ÙØ£ÙØªÙ’ Ø·ÙØ§Ù‚ÙØªÙÙŠ ØªÙÙ†Ù’ÙÙØ¯Ù. Ø§Ù†Ù’ØªÙÙ‡ÙØªÙ’ Ø±ÙØ­Ù’Ù„ÙØªÙÙŠ. Ù„ÙÙ…ÙØ³Ù’ØªÙ Ù‚ÙÙ…ÙÙ‘Ø©Ù Ø³ÙÙ…ÙØ§Ø¡Ù Ø§Ù„Ù’Ø£ÙØ±Ù’Ø¶Ù ÙˆÙØ£ÙØ·Ù’Ù„ÙÙ‚Ù’ØªÙ ÙƒÙÙ„ÙÙ‘ Ù…ÙØ§ ØªÙØ¨ÙÙ‚ÙÙ‘Ù‰ Ù…ÙÙ†Ù’ Ù†ÙÙˆØ±ÙÙŠ. Ù†ÙØ¸ÙØ±Ù Ø§Ù„Ù†ÙÙ‘Ø§Ø³Ù Ø¹ÙÙ„ÙÙ‰ Ø§Ù„Ù’Ø£ÙØ±Ù’Ø¶Ù Ù„ÙÙŠÙØ±ÙÙˆÙ’Ù†ÙÙŠ ÙˆÙØ£ÙÙ†ÙØ§ Ø£ÙØªÙÙˆÙÙ‡ÙÙ‘Ø¬Ù. Ø±ÙØ£ÙÙˆÙ’Ø§ Ø£ÙÙ„Ù’ÙˆÙØ§Ù†ÙÙŠ Ø§Ù„Ù’Ø¬ÙÙ…ÙÙŠÙ„ÙØ©Ù ÙˆÙØ§Ù„Ù’Ù…ÙØ´Ù’Ø±ÙÙ‚ÙØ©Ù! Ù‡ÙØªÙÙÙÙˆØ§: ÙŠÙØ§ Ø¥ÙÙ„ÙÙ‡ÙÙŠ! Ø§Ù„Ø´ÙÙ‘ÙÙÙ‚Ù Ø§Ù„Ù’Ù‚ÙØ·Ù’Ø¨ÙÙŠÙÙ‘! Ù‚ÙØ¯ÙÙ‘Ù…Ù’ØªÙ Ø¹ÙØ±Ù’Ø¶Ù‹Ø§ Ø£ÙØ®ÙÙŠØ±Ù‹Ø§ ÙˆÙØ¬ÙÙ…ÙÙŠÙ„Ù‹Ø§ Ù‚ÙØ¨Ù’Ù„Ù Ø£ÙÙ†Ù’ Ø£ÙØªÙÙ„ÙØ§Ø´ÙÙ‰."
                        },
                        'en': {
                            0: "The Sun Sneezes",
                            1: "I used to live on the biggest, brightest star in our sky: the Sun. It was home! Then, one morning, I felt a giant, fiery tickle start deep inside.",
                            2: "'Ğ-a-a-a...' the Sun rumbled. CHOooo! The Sun let out a giant sneeze, and suddenly; I was flying!",
                            3: "I was a tiny, giggling piece of that sneeze, and my name is Sparky: I flew right out into space! 'Whee!' I shouted. 'What an adventure this is going to be!'",
                            4: "My first stop: the satellites! I zipped by and gave them a little tickle. They started spinning and got all dizzy! A scientist on Earth saw them wobble. She sent a signal to help fix them. 'All better!' she said, and I kept going.",
                            5: "Next, I zoomed down and tickled the big power lines. The lines wiggled, and poof! The lights went out! A worker in a big truck came quickly: She helped fix the power: 'They're on!' she cheered. I was causing all kinds of mischief!",
                            6: "I tried to dance inside the space station, but I couldn't get in! The astronauts were safe inside. Their space station is a super-strong house, built to protect them from all the Sun's sneezes. They just waved hello at me from their cozy fort.",
                            7: "I zipped by an airplane in the sky. I gave the pilot's radio a quick tickle. Buzz... Buzz... went the radio. But Pilot Pat was totally calm. She knew just what to do to keep flying safely.",
                            8: "I made it all the way down to a tractor in a field. I tickled its map screen, and it went blank! Farmer Fran just smiled. 'Time to steer myself?' she said. She kept driving perfectly, even without the screen. Humans are so clever!",
                            9: "Finally, I was running out of energy. My journey was over. I touched the very top of Earth's sky and let out all my remaining light. People on Earth looked up to see me glow. They saw my beautiful, bright colors! 'Wow! The Aurora!' they cheered. I put on a final, beautiful show before I faded away."
                        }
                    },
                    'seekers': {
                        'en': {
                            0: "Weather Beyond: A Space Weather Adventure - Follow Celeste as she discovers how solar storms affect our technology and connect us to the cosmos.",
                            1: "I'm Celeste, and every clear night I set up my telescope on the rooftop. The stars feel close, and my telescope lets me chase galaxies, nebulae, and wild things in the night sky. But tonightâ€¦nothing is working. My telescope's camera keeps flickering, and my star mapping app won't update.",
                            2: "\"Seriously?\" I muttered, rebooting my phone for the millionth time. The screen froze. My telescope's motor sounded weak, then died. Dad poked his head out the window, coffee in hand. \"Solar storm, maybe?\" he said. \"Space weather hits the tech sometimes.\"",
                            3: "I blinked. Space weather? I thought that was just science class stuff: solar flares, coronal mass ejectionsâ€”giant eruptions from the Sun, hurling plasma and energy through space. Could that really reach us here?",
                            4: "I pulled up the NASA space weather alert. \"Major CME,\" the page flashed. \"Geomagnetic storm likely tonight.\" My favorite astronomy app had a pop-up: \"Satellite tracking offline due to increased solar activity.\"",
                            5: "Dad explained, \"CME's are like giant clouds of charged particles from the Sun. When they reach Earth, they mess with power lines, GPS, and even telescopes. The Earth's magnetic field usually shields us, but tonight it's getting hammered.\"",
                            6: "I messaged my astronomy club group chat. Zoey replied, \"My Wi-Fi's down. Jamie says her telescope is acting up, too. Is this why sometimes the Northern Lights show up farther south?\" I smiled, thinking how space weather isn't just a science topicâ€”it's something that connects us all.",
                            7: "Instead of feeling defeated, I flipped through my old paper star charts and found Orion. I guided my telescope manually, charting what I could by hand. Tonight, the sky wasn't just starsâ€”it was a reminder of how the Sun's power can reach across 150 million kilometers and touch my little corner of Earth.",
                            8: "As the geomagnetic storm continued, I stared at the sky. Even though my tech was down, I felt a new connection to the cosmos. Somewhere, the auroras might be burning brightâ€”maybe even visible from our city if the solar storm was strong enough.",
                            9: "Tomorrow, everything would be back to normalâ€”phone, telescope, internet. But now I understood: studying the stars isn't just about looking out. It's about learning how the Sun and Earth are always in conversation, sending signals and storms, connecting every astronomer beneath the sky."
                        },
                        'ar': {
                            // Arabic text for seekers level - Celeste's space weather story
                            0: "Ø³ÙÙŠÙ„ÙŠØ³ØªÙ ÙˆØ±ÙØ³ÙØ§Ù„Ø©Ù Ø³ÙÙ…ÙØ§Ø¡Ù Ø§Ù„Ù„ÙÙ‘ÙŠÙ„Ù Ø§Ù„Ø³ÙÙ‘Ø±ÙÙ‘ÙŠÙÙ‘Ø© .",
                            1: "Ø£ÙÙ†ÙØ§ Ø³ÙÙŠÙ„ÙŠØ³ØªÙØŒ ÙˆÙÙÙŠ ÙƒÙÙ„ÙÙ‘ Ù„ÙÙŠÙ’Ù„ÙØ©Ù ØµÙØ§ÙÙÙŠÙØ©Ù Ø£ÙØ¹ÙØ¯ÙÙ‘ ØªÙÙ„ÙØ³Ù’ÙƒÙÙˆØ¨ÙÙŠ Ø¹ÙÙ„ÙÙ‰ Ø³ÙØ·Ù’Ø­Ù Ø§Ù„Ù…ÙÙ†Ù’Ø²ÙÙ„Ù. Ø§Ù„Ù†ÙÙ‘Ø¬ÙÙˆÙ…Ù ØªÙØ¨Ù’Ø¯ÙÙˆ Ù‚ÙØ±ÙÙŠØ¨ÙØ©Ù‹ØŒ ÙˆÙØªÙÙ„ÙØ³Ù’ÙƒÙÙˆØ¨ÙÙŠ ÙŠÙØ³Ù’Ù…ÙØ­Ù Ù„ÙÙŠ Ø¨ÙÙ…ÙØ·ÙØ§Ø±ÙØ¯ÙØ©Ù Ø§Ù„Ù…ÙØ¬ÙØ±ÙÙ‘Ø§ØªÙØŒ ÙˆÙØ§Ù„Ø³ÙÙ‘Ø¯ÙÙ…ÙØŒ ÙˆÙØ§Ù„Ø£ÙØ´Ù’ÙŠÙØ§Ø¡Ù Ø§Ù„ØºÙØ±ÙÙŠØ¨ÙØ©Ù ÙÙÙŠ Ø³ÙÙ…ÙØ§Ø¡Ù Ø§Ù„Ù„ÙÙ‘ÙŠÙ’Ù„Ù. Ù„ÙÙƒÙÙ†ÙÙ‘ Ø§Ù„Ù„ÙÙ‘ÙŠÙ’Ù„ÙØ©Ù... Ù„ÙØ§ Ø´ÙÙŠÙ’Ø¡Ù ÙŠÙØ¹Ù’Ù…ÙÙ„Ù. ÙƒÙØ§Ù…ÙÙŠØ±ÙØ§ ØªÙÙ„ÙØ³Ù’ÙƒÙÙˆØ¨ÙÙŠ ØªÙØ³Ù’ØªÙÙ…ÙØ±ÙÙ‘ ÙÙÙŠ Ø§Ù„ÙˆÙÙ…ÙÙŠØ¶ÙØŒ ÙˆÙØªÙØ·Ù’Ø¨ÙÙŠÙ‚Ù Ø®ÙØ±ÙÙŠØ·ÙØ©Ù Ø§Ù„Ù†ÙÙ‘Ø¬ÙÙˆÙ…Ù Ø§Ù„Ø®ÙØ§ØµÙÙ‘ Ø¨ÙÙŠ Ù„ÙØ§ ÙŠÙÙ‚ÙÙˆÙ…Ù Ø¨ÙØ§Ù„ØªÙÙ‘Ø­Ù’Ø¯ÙÙŠØ«Ù.",
                            2: "\"Ø³ÙØ±ÙÙ‘ÙŠÙ‹Ù‘Ø§ØŸ\" ØªÙÙ…Ù’ØªÙÙ…Ù’ØªÙØŒ ÙˆÙØ£ÙØ¹ÙØ¯Ù’ØªÙ ØªÙØ´Ù’ØºÙÙŠÙ„Ù Ù‡ÙØ§ØªÙÙÙÙŠ Ù„ÙÙ„Ù’Ù…ÙØ±ÙÙ‘Ø©Ù Ø§Ù„Ù…ÙÙ„Ù’ÙŠÙÙˆÙ†Ù. ØªÙØ¬ÙÙ…ÙÙ‘Ø¯ÙØªÙ Ø§Ù„Ø´ÙÙ‘Ø§Ø´ÙØ©Ù. Ø¨ÙØ¯ÙØ§ ØµÙÙˆÙ’ØªÙ Ù…ÙØ­ÙØ±ÙÙ‘ÙƒÙ ØªÙÙ„ÙØ³Ù’ÙƒÙÙˆØ¨ÙÙŠ Ø¶ÙØ¹ÙÙŠÙÙ‹Ø§ØŒ Ø«ÙÙ…ÙÙ‘ Ù…ÙØ§ØªÙ. Ø£ÙØ®Ù’Ø±ÙØ¬Ù Ø£ÙØ¨ÙÙŠ Ø±ÙØ£Ù’Ø³ÙÙ‡Ù Ù…ÙÙ†Ù Ø§Ù„Ù†ÙÙ‘Ø§ÙÙØ°ÙØ©ÙØŒ ÙˆÙÙÙÙŠ ÙŠÙØ¯ÙÙ‡Ù ÙÙÙ†Ù’Ø¬ÙØ§Ù†Ù Ù‚ÙÙ‡Ù’ÙˆÙØ©Ù. Ù‚ÙØ§Ù„Ù: \"Ø¹ÙØ§ØµÙÙÙØ©ÙŒ Ø´ÙÙ…Ù’Ø³ÙÙŠÙÙ‘Ø©ÙŒØŒ Ø±ÙØ¨ÙÙ‘Ù…ÙØ§ØŸ Ø·ÙÙ‚Ù’Ø³Ù Ø§Ù„ÙÙØ¶ÙØ§Ø¡Ù ÙŠÙØ¤ÙØ«ÙÙ‘Ø±Ù Ø¹ÙÙ„ÙÙ‰ Ø§Ù„ØªÙÙ‘ÙƒÙ’Ù†ÙÙˆÙ„ÙÙˆØ¬ÙÙŠÙØ§ Ø£ÙØ­Ù’ÙŠÙØ§Ù†Ù‹Ø§.\"",
                            3: "Ø±ÙÙ…ÙØ´Ù’ØªÙ. Ø·ÙÙ‚Ù’Ø³Ù Ø§Ù„ÙÙØ¶ÙØ§Ø¡ÙØŸ Ø¸ÙÙ†ÙÙ†Ù’ØªÙ Ø£ÙÙ†ÙÙ‘ Ù‡ÙØ°ÙØ§ Ù…ÙØ¬ÙØ±ÙÙ‘Ø¯Ù Ø´ÙÙŠÙ’Ø¡Ù Ù…ÙÙ†Ù’ Ø­ÙØµÙÙ‘Ø©Ù Ø§Ù„Ø¹ÙÙ„ÙÙˆÙ…Ù: Ø§Ù„Ø§ÙÙ†Ù’ÙÙØ¬ÙØ§Ø±ÙØ§ØªÙ Ø§Ù„Ø´ÙÙ‘Ù…Ù’Ø³ÙÙŠÙÙ‘Ø©ÙØŒ Ø§Ù„Ø§ÙÙ†Ù’Ø¨ÙØ¹ÙØ§Ø«ÙØ§ØªÙ Ø§Ù„ÙƒÙØªÙÙ„ÙÙŠÙÙ‘Ø©Ù Ø§Ù„Ø¥ÙÙƒÙ’Ù„ÙÙŠÙ„ÙÙŠÙÙ‘Ø©Ùâ€”Ø«ÙÙˆÙ’Ø±ÙØ§Ù†ÙØ§ØªÙŒ Ø¹ÙÙ…Ù’Ù„ÙØ§Ù‚ÙØ©ÙŒ Ù…ÙÙ†Ù Ø§Ù„Ø´ÙÙ‘Ù…Ù’Ø³ÙØŒ ØªÙÙ‚Ù’Ø°ÙÙÙ Ø§Ù„Ø¨Ù’Ù„ÙØ§Ø²Ù’Ù…ÙØ§ ÙˆÙØ§Ù„Ø·ÙÙ‘Ø§Ù‚ÙØ©Ù Ø¹ÙØ¨Ù’Ø±Ù Ø§Ù„ÙÙØ¶ÙØ§Ø¡Ù. Ù‡ÙÙ„Ù’ ÙŠÙÙ…Ù’ÙƒÙÙ†Ù Ø£ÙÙ†Ù’ ÙŠÙØµÙÙ„Ù Ø°ÙÙ„ÙÙƒÙ Ø¥ÙÙ„ÙÙŠÙ’Ù†ÙØ§ Ø­ÙÙ‚Ù‹Ù‘Ø§ Ù‡ÙÙ†ÙØ§ØŸ",
                            4: "Ø³ÙØ­ÙØ¨Ù’ØªÙ ØªÙÙ†Ù’Ø¨ÙÙŠÙ‡Ù Ø·ÙÙ‚Ù’Ø³Ù Ø§Ù„ÙÙØ¶ÙØ§Ø¡Ù Ø§Ù„Ø®ÙØ§ØµÙÙ‘ Ø¨ÙÙˆÙÙƒÙØ§Ù„ÙØ©Ù Ù†ÙØ§Ø³ÙØ§. ÙˆÙÙ…ÙØ¶ÙØªÙ Ø§Ù„ØµÙÙ‘ÙÙ’Ø­ÙØ©Ù: \"Ø§ÙÙ†Ù’Ø¨ÙØ¹ÙØ§Ø«ÙŒ ÙƒÙØªÙÙ„ÙÙŠÙŒÙ‘ Ø¥ÙÙƒÙ’Ù„ÙÙŠÙ„ÙÙŠÙŒÙ‘ ÙƒÙØ¨ÙÙŠØ±ÙŒ\". \"Ø¹ÙØ§ØµÙÙÙØ©ÙŒ Ù…ÙØºÙ’Ù†ÙØ§Ø·ÙÙŠØ³ÙÙŠÙÙ‘Ø©ÙŒ Ø£ÙØ±Ù’Ø¶ÙÙŠÙÙ‘Ø©ÙŒ Ù…ÙØ­Ù’ØªÙÙ…ÙÙ„ÙØ©ÙŒ Ø§Ù„Ù„ÙÙ‘ÙŠÙ’Ù„ÙØ©Ù\". Ø¸ÙÙ‡ÙØ±ÙØªÙ’ Ù†ÙØ§ÙÙØ°ÙØ©ÙŒ Ù…ÙÙ†Ù’Ø¨ÙØ«ÙÙ‚ÙØ©ÙŒ ÙÙÙŠ ØªÙØ·Ù’Ø¨ÙÙŠÙ‚Ù Ø§Ù„ÙÙÙ„ÙÙƒÙ Ø§Ù„Ù…ÙÙÙØ¶ÙÙ‘Ù„Ù Ù„ÙØ¯ÙÙŠÙÙ‘: \"ØªÙØªÙØ¨ÙÙ‘Ø¹Ù Ø§Ù„Ø£ÙÙ‚Ù’Ù…ÙØ§Ø±Ù Ø§Ù„ØµÙÙ‘Ù†ÙØ§Ø¹ÙÙŠÙÙ‘Ø©Ù ØºÙÙŠÙ’Ø±Ù Ù…ÙØªÙÙ‘ØµÙÙ„Ù Ø¨ÙØ§Ù„Ø¥ÙÙ†Ù’ØªÙØ±Ù’Ù†ÙØªÙ Ø¨ÙØ³ÙØ¨ÙØ¨Ù Ø²ÙÙŠÙØ§Ø¯ÙØ©Ù Ø§Ù„Ù†ÙÙ‘Ø´ÙØ§Ø·Ù Ø§Ù„Ø´ÙÙ‘Ù…Ù’Ø³ÙÙŠÙÙ‘.\"",
                            5: "Ø´ÙØ±ÙØ­Ù Ø£ÙØ¨ÙÙŠ: \"Ø§Ù„Ø§ÙÙ†Ù’Ø¨ÙØ¹ÙØ§Ø«ÙØ§ØªÙ Ø§Ù„ÙƒÙØªÙÙ„ÙÙŠÙÙ‘Ø©Ù Ø§Ù„Ø¥ÙÙƒÙ’Ù„ÙÙŠÙ„ÙÙŠÙÙ‘Ø©Ù (CME) Ù…ÙØ«Ù’Ù„Ù Ø§Ù„ØºÙÙŠÙÙˆÙ…Ù Ø§Ù„Ø¹ÙÙ…Ù’Ù„ÙØ§Ù‚ÙØ©Ù Ù…ÙÙ†Ù Ø§Ù„Ø¬ÙØ³ÙÙŠÙ’Ù…ÙØ§ØªÙ Ø§Ù„Ù…ÙØ´Ù’Ø­ÙÙˆÙ†ÙØ©Ù Ø§Ù„Ù‚ÙØ§Ø¯ÙÙ…ÙØ©Ù Ù…ÙÙ†Ù Ø§Ù„Ø´ÙÙ‘Ù…Ù’Ø³Ù. Ø¹ÙÙ†Ù’Ø¯ÙÙ…ÙØ§ ØªÙØµÙÙ„Ù Ø¥ÙÙ„ÙÙ‰ Ø§Ù„Ø£ÙØ±Ù’Ø¶ÙØŒ ÙÙØ¥ÙÙ†ÙÙ‘Ù‡ÙØ§ ØªÙØ­Ù’Ø¯ÙØ«Ù ÙÙÙˆÙ’Ø¶ÙÙ‰ ÙÙÙŠ Ø®ÙØ·ÙÙˆØ·Ù Ø§Ù„ÙƒÙÙ‡Ù’Ø±ÙØ¨ÙØ§Ø¡ÙØŒ ÙˆÙÙ†ÙØ¸ÙØ§Ù…Ù ØªÙØ­Ù’Ø¯ÙÙŠØ¯Ù Ø§Ù„Ù…ÙÙˆÙØ§Ù‚ÙØ¹Ù Ø§Ù„Ø¹ÙØ§Ù„ÙÙ…ÙÙŠÙÙ‘ (GPS)ØŒ ÙˆÙØ­ÙØªÙÙ‘Ù‰ Ø§Ù„ØªÙÙ‘Ù„ÙØ³Ù’ÙƒÙÙˆØ¨ÙØ§ØªÙ. Ø¹ÙØ§Ø¯ÙØ©Ù‹ Ù…ÙØ§ ÙŠÙØ­Ù’Ù…ÙÙŠÙ†ÙØ§ Ø§Ù„Ù…ÙØ¬ÙØ§Ù„Ù Ø§Ù„Ù…ÙØºÙ’Ù†ÙØ§Ø·ÙÙŠØ³ÙÙŠÙÙ‘ Ù„ÙÙ„Ù’Ø£ÙØ±Ù’Ø¶ÙØŒ Ù„ÙÙƒÙÙ†ÙÙ‘ Ø§Ù„Ù„ÙÙ‘ÙŠÙ’Ù„ÙØ©Ù ÙŠÙØªÙØ¹ÙØ±ÙÙ‘Ø¶Ù Ù„ÙØ¶ÙØ±Ù’Ø¨ÙØ©Ù Ù‚ÙÙˆÙÙŠÙÙ‘Ø©Ù.\"",
                            6: "Ø±ÙØ§Ø³ÙÙ„Ù’ØªÙ Ù…ÙØ¬Ù’Ù…ÙÙˆØ¹ÙØ©Ù Ø§Ù„Ø¯ÙÙ‘Ø±Ù’Ø¯ÙØ´ÙØ©Ù Ø§Ù„Ø®ÙØ§ØµÙÙ‘Ø©Ù Ø¨ÙÙ†ÙØ§Ø¯ÙÙŠ Ø§Ù„ÙÙÙ„ÙÙƒÙ. Ø£ÙØ¬ÙØ§Ø¨ÙØªÙ’ Ø²ÙÙˆÙŠ: \"Ø´ÙØ¨ÙÙƒÙØ©Ù Ø§Ù„ÙˆÙØ§ÙŠÙ’ ÙÙØ§ÙŠÙ’ Ø§Ù„Ø®ÙØ§ØµÙÙ‘Ø©Ù Ø¨ÙÙŠ Ù…ÙØ¹ÙØ·ÙÙ‘Ù„ÙØ©ÙŒ. ÙˆÙØªÙÙ‚ÙÙˆÙ„Ù Ø¬ÙÙŠÙ’Ù…ÙÙŠ Ø¥ÙÙ†ÙÙ‘ ØªÙÙ„ÙØ³Ù’ÙƒÙÙˆØ¨ÙÙ‡ÙØ§ ÙŠÙØªÙØµÙØ±ÙÙ‘ÙÙ Ø¨ÙØºÙØ±ÙØ§Ø¨ÙØ©Ù Ø£ÙÙŠÙ’Ø¶Ù‹Ø§. Ù‡ÙÙ„Ù’ Ù‡ÙØ°ÙØ§ Ù‡ÙÙˆÙ Ø§Ù„Ø³ÙÙ‘Ø¨ÙØ¨Ù ÙÙÙŠ Ø¸ÙÙ‡ÙÙˆØ±Ù Ø§Ù„Ø£ÙØ¶Ù’ÙˆÙØ§Ø¡Ù Ø§Ù„Ø´ÙÙ‘Ù…ÙØ§Ù„ÙÙŠÙÙ‘Ø©Ù Ø£ÙØ­Ù’ÙŠÙØ§Ù†Ù‹Ø§ ÙÙÙŠ Ù…ÙÙ†ÙØ§Ø·ÙÙ‚Ù Ø£ÙØ¨Ù’Ø¹ÙØ¯Ù Ø¬ÙÙ†ÙÙˆØ¨Ù‹Ø§ØŸ\" Ø§ÙØ¨Ù’ØªÙØ³ÙÙ…Ù’ØªÙØŒ ÙˆÙØ£ÙÙ†ÙØ§ Ø£ÙÙÙÙƒÙÙ‘Ø±Ù ÙƒÙÙŠÙ’ÙÙ Ø£ÙÙ†ÙÙ‘ Ø·ÙÙ‚Ù’Ø³Ù Ø§Ù„ÙÙØ¶ÙØ§Ø¡Ù Ù„ÙÙŠÙ’Ø³Ù Ù…ÙØ¬ÙØ±ÙÙ‘Ø¯Ù Ù…ÙÙˆÙ’Ø¶ÙÙˆØ¹Ù Ø¹ÙÙ„Ù’Ù…ÙÙŠÙÙ‘â€”Ø¥ÙÙ†ÙÙ‘Ù‡Ù Ø´ÙÙŠÙ’Ø¡ÙŒ ÙŠÙØ±Ù’Ø¨ÙØ·ÙÙ†ÙØ§ Ø¬ÙÙ…ÙÙŠØ¹Ù‹Ø§.",
                            7: "Ø¨ÙØ¯ÙÙ„Ù‹Ø§ Ù…ÙÙ†Ù Ø§Ù„Ø´ÙÙ‘Ø¹ÙÙˆØ±Ù Ø¨ÙØ§Ù„Ù‡ÙØ²ÙÙŠÙ…ÙØ©ÙØŒ Ù‚ÙÙ„ÙÙ‘Ø¨Ù’ØªÙ Ø®ÙØ±ÙØ§Ø¦ÙØ·ÙÙŠ Ø§Ù„Ù†ÙÙ‘Ø¬Ù’Ù…ÙÙŠÙÙ‘Ø©Ù Ø§Ù„ÙˆÙØ±ÙÙ‚ÙÙŠÙÙ‘Ø©Ù Ø§Ù„Ù‚ÙØ¯ÙÙŠÙ…ÙØ©Ù ÙˆÙÙˆÙØ¬ÙØ¯Ù’ØªÙ ÙƒÙÙˆÙ’ÙƒÙØ¨ÙØ©Ù Ø§Ù„Ø¬ÙØ¨ÙÙ‘Ø§Ø±Ù. ÙˆÙØ¬ÙÙ‘Ù‡Ù’ØªÙ ØªÙÙ„ÙØ³Ù’ÙƒÙÙˆØ¨ÙÙŠ ÙŠÙØ¯ÙÙˆÙÙŠÙ‹Ù‘Ø§ØŒ ÙˆÙØ±ÙØ³ÙÙ…Ù’ØªÙ Ù…ÙØ§ Ø§Ø³Ù’ØªÙØ·ÙØ¹Ù’ØªÙ Ø¨ÙØ§Ù„ÙŠÙØ¯Ù. Ø§Ù„Ù„ÙÙ‘ÙŠÙ’Ù„ÙØ©ÙØŒ Ù„ÙÙ…Ù’ ØªÙÙƒÙÙ†Ù Ø§Ù„Ø³ÙÙ‘Ù…ÙØ§Ø¡Ù Ù…ÙØ¬ÙØ±ÙÙ‘Ø¯Ù Ù†ÙØ¬ÙÙˆÙ…Ùâ€”Ù„ÙÙ‚ÙØ¯Ù’ ÙƒÙØ§Ù†ÙØªÙ’ ØªÙØ°Ù’ÙƒÙÙŠØ±Ù‹Ø§ Ø¨ÙÙƒÙÙŠÙ’ÙÙ ÙŠÙÙ…Ù’ÙƒÙÙ†Ù Ù„ÙÙ‚ÙÙˆÙÙ‘Ø©Ù Ø§Ù„Ø´ÙÙ‘Ù…Ù’Ø³Ù Ø£ÙÙ†Ù’ ØªÙØµÙÙ„Ù Ø¹ÙØ¨Ù’Ø±Ù 150 Ù…ÙÙ„Ù’ÙŠÙÙˆÙ†Ù ÙƒÙÙŠÙ„ÙÙˆÙ…ÙØªÙ’Ø±Ù ÙˆÙØªÙÙ„Ù’Ù…ÙØ³Ù Ø±ÙÙƒÙ’Ù†ÙÙŠ Ø§Ù„ØµÙÙ‘ØºÙÙŠØ±Ù Ø¹ÙÙ„ÙÙ‰ Ø§Ù„Ø£ÙØ±Ù’Ø¶Ù.",
                            8: "Ø¨ÙÙŠÙ’Ù†ÙÙ…ÙØ§ Ø§Ø³Ù’ØªÙÙ…ÙØ±ÙÙ‘ØªÙ Ø§Ù„Ø¹ÙØ§ØµÙÙÙØ©Ù Ø§Ù„Ù…ÙØºÙ’Ù†ÙØ§Ø·ÙÙŠØ³ÙÙŠÙÙ‘Ø©Ù Ø§Ù„Ø£ÙØ±Ù’Ø¶ÙÙŠÙÙ‘Ø©ÙØŒ Ø­ÙØ¯ÙÙ‘Ù‚Ù’ØªÙ ÙÙÙŠ Ø§Ù„Ø³ÙÙ‘Ù…ÙØ§Ø¡Ù. Ø¹ÙÙ„ÙÙ‰ Ø§Ù„Ø±ÙÙ‘ØºÙ’Ù…Ù Ù…ÙÙ†Ù’ ØªÙØ¹ÙØ·ÙÙ‘Ù„Ù ØªÙÙƒÙ’Ù†ÙÙŠÙÙ‘ØªÙÙŠØŒ Ø´ÙØ¹ÙØ±Ù’ØªÙ Ø¨ÙØ§ØªÙÙ‘ØµÙØ§Ù„Ù Ø¬ÙØ¯ÙÙŠØ¯Ù Ø¨ÙØ§Ù„ÙƒÙÙˆÙ’Ù†Ù. ÙÙÙŠ Ù…ÙÙƒÙØ§Ù†Ù Ù…ÙØ§ØŒ Ø±ÙØ¨ÙÙ‘Ù…ÙØ§ ØªÙØ­Ù’ØªÙØ±ÙÙ‚Ù Ø§Ù„Ø£ÙØ¶Ù’ÙˆÙØ§Ø¡Ù Ø§Ù„Ø´ÙÙ‘ÙÙÙ‚ÙÙŠÙÙ‘Ø©Ù Ø³ÙØ§Ø·ÙØ¹ÙØ©Ù‹â€”ÙˆÙØ±ÙØ¨ÙÙ‘Ù…ÙØ§ ØªÙÙƒÙÙˆÙ†Ù Ù…ÙØ±Ù’Ø¦ÙÙŠÙÙ‘Ø©Ù‹ Ø­ÙØªÙÙ‘Ù‰ Ù…ÙÙ†Ù’ Ù…ÙØ¯ÙÙŠÙ†ÙØªÙÙ†ÙØ§ Ø¥ÙØ°ÙØ§ ÙƒÙØ§Ù†ÙØªÙ Ø§Ù„Ø¹ÙØ§ØµÙÙÙØ©Ù Ø§Ù„Ø´ÙÙ‘Ù…Ù’Ø³ÙÙŠÙÙ‘Ø©Ù Ù‚ÙÙˆÙÙŠÙÙ‘Ø©Ù‹ Ø¨ÙÙ…ÙØ§ ÙÙÙŠÙ‡Ù Ø§Ù„ÙƒÙÙÙØ§ÙŠÙØ©Ù.",
                            9: "ØºÙØ¯Ù‹Ø§ØŒ Ø³ÙÙŠÙØ¹ÙÙˆØ¯Ù ÙƒÙÙ„ÙÙ‘ Ø´ÙÙŠÙ’Ø¡Ù Ø¥ÙÙ„ÙÙ‰ Ø·ÙØ¨ÙÙŠØ¹ÙØªÙÙ‡Ùâ€”Ø§Ù„Ù‡ÙØ§ØªÙÙÙØŒ Ø§Ù„ØªÙÙ‘Ù„ÙØ³Ù’ÙƒÙÙˆØ¨ÙØŒ Ø§Ù„Ø¥ÙÙ†Ù’ØªÙØ±Ù’Ù†ÙØªÙ. Ù„ÙÙƒÙÙ†ÙÙ‘Ù†ÙÙŠ Ø§Ù„Ø¢Ù†Ù ÙÙÙ‡ÙÙ…Ù’ØªÙ: Ø¯ÙØ±ÙØ§Ø³ÙØ©Ù Ø§Ù„Ù†ÙÙ‘Ø¬ÙÙˆÙ…Ù Ù„ÙÙŠÙ’Ø³ÙØªÙ’ Ù…ÙØ¬ÙØ±ÙÙ‘Ø¯Ù Ù†ÙØ¸ÙØ±Ù Ø¥ÙÙ„ÙÙ‰ Ø§Ù„Ø®ÙØ§Ø±ÙØ¬Ù. Ø¥ÙÙ†ÙÙ‘Ù‡ÙØ§ ØªÙØªÙØ¹ÙÙ„ÙÙ‘Ù‚Ù Ø¨ÙØªÙØ¹ÙÙ„ÙÙ‘Ù…Ù ÙƒÙÙŠÙ’ÙÙ ØªÙØªÙØ­ÙØ¯ÙÙ‘Ø«Ù Ø§Ù„Ø´ÙÙ‘Ù…Ù’Ø³Ù ÙˆÙØ§Ù„Ø£ÙØ±Ù’Ø¶Ù Ø¯ÙØ§Ø¦ÙÙ…Ù‹Ø§ Ù…ÙØ¹Ù‹Ø§ØŒ ØªÙØ±Ù’Ø³ÙÙ„ÙØ§Ù†Ù Ø§Ù„Ø¥ÙØ´ÙØ§Ø±ÙØ§ØªÙ ÙˆÙØ§Ù„Ø¹ÙÙˆÙØ§ØµÙÙÙØŒ ÙˆÙØªÙØ±Ù’Ø¨ÙØ·ÙØ§Ù†Ù ÙƒÙÙ„ÙÙ‘ ÙÙÙ„ÙÙƒÙÙŠÙÙ‘ ØªÙØ­Ù’ØªÙ Ø§Ù„Ø³ÙÙ‘Ù…ÙØ§Ø¡Ù."
                        }
                    }
                };

                const language = isArabic ? 'ar' : 'en';
                const levelTexts = textContent[selectedLevel];
                
                if (levelTexts && levelTexts[language]) {
                    return levelTexts[language][pageIndex] || '';
                }
                
                // Fallback to young explorers if level not found
                const fallbackTexts = textContent['curious'][language];
                return fallbackTexts ? (fallbackTexts[pageIndex] || '') : '';
            }

            nextPage() {
                if (this.isAnimating || this.currentPage >= this.totalPages - 1) return;
                
                this.isAnimating = true;
                this.showLoading();
                
                const currentPageEl = this.pageContainer.children[this.currentPage];
                if (currentPageEl) {
                    currentPageEl.classList.add('prev');
                }
                
                setTimeout(() => {
                    this.currentPage++;
                    this.showPage(this.currentPage);
                    this.updateDisplay();
                    this.isAnimating = false;
                }, settings.animationSpeed / 2);
            }

            previousPage() {
                if (this.isAnimating || this.currentPage <= 0) return;
                
                this.isAnimating = true;
                this.showLoading();
                
                const currentPageEl = this.pageContainer.children[this.currentPage];
                if (currentPageEl) {
                    currentPageEl.classList.remove('active');
                }
                
                setTimeout(() => {
                    this.currentPage--;
                    this.showPage(this.currentPage);
                    this.updateDisplay();
                    this.isAnimating = false;
                }, settings.animationSpeed / 2);
            }

            goToPage(pageIndex) {
                if (this.isAnimating || pageIndex < 0 || pageIndex >= this.totalPages) return;
                
                this.isAnimating = true;
                this.showLoading();
                
                setTimeout(() => {
                    this.currentPage = pageIndex;
                    this.showPage(this.currentPage);
                    this.updateDisplay();
                    this.isAnimating = false;
                }, settings.animationSpeed / 2);
            }

            updateDisplay() {
                // Update button states
                this.prevBtn.disabled = this.currentPage === 0;
                this.nextBtn.disabled = this.currentPage === this.totalPages - 1;
                
                // Check if Arabic is active for RTL layout
                const isArabic = document.getElementById('arabicBtn') && document.getElementById('arabicBtn').classList.contains('active');
                const flipbookContainer = document.querySelector('.flipbook-container');
                
                // Apply RTL class for Arabic
                if (isArabic) {
                    flipbookContainer.classList.add('rtl');
                } else {
                    flipbookContainer.classList.remove('rtl');
                }
                
                // Update button symbols for minimal design
                if (isArabic) {
                    this.prevBtn.innerHTML = '<';
                    this.nextBtn.innerHTML = '>';
                } else {
                    this.prevBtn.innerHTML = '<';
                    this.nextBtn.innerHTML = '>';
                }

                // Show/hide quiz button on last page
                if (this.currentPage === this.totalPages - 1) {
                    this.endOptions.style.display = 'flex';
                } else {
                    this.endOptions.style.display = 'none';
                }
            }

            goBackToHome() {
                // Hide flipbook with animation
                this.flipbook.style.transition = 'opacity 0.5s ease-out';
                this.flipbook.style.opacity = '0';
                
                setTimeout(() => {
                    this.flipbook.style.display = 'none';
                    this.flipbook.style.opacity = '1';
                    this.flipbook.style.transition = '';
                    
                    // Show level selection page instead of home page
                    const levelPage = document.getElementById('levelPage');
                    levelPage.style.display = 'flex';
                    levelPage.style.opacity = '0';
                    levelPage.style.transition = 'opacity 0.5s ease-in';
                    
                    setTimeout(() => {
                        levelPage.style.opacity = '1';
                        setTimeout(() => {
                            levelPage.style.transition = '';
                        }, 500);
                    }, 50);
                }, 500);
                
                console.log('ğŸ  Returned to level selection page from flipbook');
            }

            preloadImages() {
                // Preload next few images for smoother experience
                const preloadCount = Math.min(3, this.totalPages);
                for (let i = 1; i <= preloadCount; i++) {
                    if (this.currentPage + i < this.totalPages) {
                        const img = new Image();
                        img.src = this.bookPages[this.currentPage + i];
                    }
                }
            }

            refreshForLanguageChange() {
                // Get new pages for current language
                this.bookPages = getBookPages();
                this.totalPages = this.bookPages.length;
                
                // Recreate pages with new images
                this.createPages();
                
                // Reset to first page
                this.currentPage = 0;
                this.updateDisplay(); // This will now handle RTL class application
                
                // Preload new images
                this.preloadImages();
                
                console.log(`ğŸ“– Flipbook refreshed for language change. New pages:`, this.bookPages);
            }

            goToQuiz() {
                // Get the current selected level from the global variable
                const selectedLevel = window.selectedLevel || 'Young Explorers';
                
                // Hide flipbook with animation
                this.flipbook.style.transition = 'opacity 0.5s ease-out';
                this.flipbook.style.opacity = '0';
                
                setTimeout(() => {
                    this.flipbook.style.display = 'none';
                    this.flipbook.style.opacity = '1';
                    this.flipbook.style.transition = '';
                    
                    // Show quiz page directly with the corresponding level
                    showQuizPage(selectedLevel);
                }, 500);
                
                console.log(`ğŸ§© Navigated to ${selectedLevel} quiz from story completion`);
            }
        }

        // ========================================
        // INITIALIZE THE APPLICATION
        // ========================================
        
        // Wait for the page to load, then start the flipbook
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize home page functionality
            initializeHomePage();
            
            console.log('ğŸ“– Flipbook system initialized with level-based pages');
            console.log('ğŸ¯ Ready to display your images!');
        });

        // ========================================
        // HOME PAGE FUNCTIONALITY
        // ========================================
        
        function initializeHomePage() {
            const homePage = document.getElementById('homePage');
            const flipbook = document.getElementById('flipbook');
            const readButton = document.getElementById('readButton');
            const quizButton = document.getElementById('quizButton');
            const englishBtn = document.getElementById('englishBtn');
            const arabicBtn = document.getElementById('arabicBtn');
            
            // Initialize default language state
            if (!window.currentLanguage) {
                window.currentLanguage = 'en'; // Default to English
                englishBtn.classList.add('active');
                console.log('ğŸŒ Initialized default language: English');
            }
            
            // Force show home page initially
            homePage.style.display = 'flex';
            homePage.style.opacity = '1';
            homePage.style.visibility = 'visible';
            flipbook.style.display = 'none';
            
            console.log('Home page initialized'); // Debug log
            console.log('Read button:', readButton); // Debug log
            console.log('Quiz button:', quizButton); // Debug log
            
            // Check if buttons exist
            if (!readButton) {
                console.error('Read button not found!');
                return;
            }
            if (!quizButton) {
                console.error('Quiz button not found!');
                return;
            }
            
            // Language switching functionality
            function switchLanguage(lang) {
                const enTexts = document.querySelectorAll('.btn-text-en, .level-title-en, .level-subtitle-en, .level-name-en, .level-desc-en, .story-title-en, .back-home-en, .book-title-en, .swipe-hint-en, .prev-en, .restart-en, .read-aloud-en, .next-en, .keyboard-hint-en, .back-to-home-en');
        const arTexts = document.querySelectorAll('.btn-text-ar, .level-title-ar, .level-subtitle-ar, .level-name-ar, .level-desc-ar, .story-title-ar, .back-home-ar, .book-title-ar, .swipe-hint-ar, .prev-ar, .restart-ar, .read-aloud-ar, .next-ar, .keyboard-hint-ar, .back-to-home-ar');
                
                // Store the current language globally
                window.currentLanguage = lang;
                
                // Clear all active states first
                englishBtn.classList.remove('active');
                arabicBtn.classList.remove('active');
                
                if (lang === 'ar') {
                    // Switch to Arabic
                    enTexts.forEach(el => el.style.display = 'none');
                    arTexts.forEach(el => el.style.display = 'inline');
                    document.body.style.direction = 'rtl';
                    arabicBtn.classList.add('active');
                    console.log('ğŸŒ Switched to Arabic language');
                } else {
                    // Switch to English
                    enTexts.forEach(el => el.style.display = 'inline');
                    arTexts.forEach(el => el.style.display = 'none');
                    document.body.style.direction = 'ltr';
                    englishBtn.classList.add('active');
                    console.log('ğŸŒ Switched to English language');
                }
                
                // Refresh flipbook if it's currently open
                if (window.flipbookApp && document.getElementById('flipbook').style.display !== 'none') {
                    window.flipbookApp.refreshForLanguageChange();
                }
            }
            
            // Language button event listeners
            englishBtn.addEventListener('click', () => switchLanguage('en'));
            arabicBtn.addEventListener('click', () => switchLanguage('ar'));
            
            // Read button click handler - now goes to level selection
            readButton.addEventListener('click', (e) => {
                e.preventDefault();
                console.log('Read button clicked'); // Debug log
                
                // Hide home page and show level selection
                homePage.style.transition = 'opacity 0.5s ease-out';
                homePage.style.opacity = '0';
                
                setTimeout(() => {
                    homePage.style.display = 'none';
                    showLevelSelection();
                }, 500);
            });
            
            // Quiz button click handler
            quizButton.addEventListener('click', (e) => {
                e.preventDefault();
                console.log('Quiz button clicked'); // Debug log
                
                // Hide home page with fade out effect
                homePage.style.transition = 'opacity 0.5s ease-out';
                homePage.style.opacity = '0';
                
                setTimeout(() => {
                    homePage.style.display = 'none';
                    showQuizLevelSelection();
                }, 500);
            });

            // Explore Space Weather button click handler
            const exploreButton = document.getElementById('exploreButton');
            exploreButton.addEventListener('click', (e) => {
                e.preventDefault();
                console.log('Explore Space Weather button clicked'); // Debug log
                
                // Hide home page with fade out effect
                homePage.style.transition = 'opacity 0.5s ease-out';
                homePage.style.opacity = '0';
                
                setTimeout(() => {
                    homePage.style.display = 'none';
                    showExploreSpaceWeather();
                }, 500);
            });
            
            // Add back to home functionality (optional)
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && flipbook.style.display !== 'none') {
                    goBackToHome();
                }
            });
        }
        
        function showQuizLevelSelection() {
            const quizLevelPage = document.getElementById('quizLevelPage');
            const quizLevelCards = document.querySelectorAll('.quiz-level-card');
            
            // Show quiz level selection page
            quizLevelPage.style.display = 'flex';
            quizLevelPage.style.opacity = '0';
            quizLevelPage.style.transition = 'opacity 0.5s ease-in';
            
            setTimeout(() => {
                quizLevelPage.style.opacity = '1';
            }, 50);
            
            // Add click handlers for quiz level cards
            quizLevelCards.forEach(card => {
                card.addEventListener('click', () => {
                    const quizLevel = card.getAttribute('data-quiz-level');
                    console.log(`Selected quiz level: ${quizLevel}`);
                    
                    // Store selected quiz level for future use
                    window.selectedQuizLevel = quizLevel;
                    
                    // Hide quiz level page and show quiz
                    quizLevelPage.style.transition = 'opacity 0.5s ease-out';
                    quizLevelPage.style.opacity = '0';
                    
                    setTimeout(() => {
                        quizLevelPage.style.display = 'none';
                        showQuizPage(quizLevel);
                    }, 500);
                });
            });

            // Close button functionality
            const closeQuizLevelPageBtn = document.getElementById('closeQuizLevelPage');
            closeQuizLevelPageBtn.addEventListener('click', () => {
                quizLevelPage.style.transition = 'opacity 0.5s ease-out';
                quizLevelPage.style.opacity = '0';
                
                setTimeout(() => {
                    quizLevelPage.style.display = 'none';
                    goBackToHome();
                }, 500);
            });
        }

        function showLevelSelection() {
            const levelPage = document.getElementById('levelPage');
            const flipbook = document.getElementById('flipbook');
            const levelCards = document.querySelectorAll('.level-card');
            const backToHomeBtn = document.getElementById('backToHomeFromLevel');
            
            // Show level selection page
            levelPage.style.display = 'flex';
            levelPage.style.opacity = '0';
            levelPage.style.transition = 'opacity 0.5s ease-in';
            
            setTimeout(() => {
                levelPage.style.opacity = '1';
            }, 50);
            
            // Add click handlers for level cards
            levelCards.forEach(card => {
                card.addEventListener('click', () => {
                    const level = card.getAttribute('data-level');
                    console.log(`Selected level: ${level}`);
                    console.log(`Current language before flipbook init: ${window.currentLanguage}`);
                    
                    // Store selected level for future use
                    window.selectedLevel = level;
                    
                    // Hide level page and show flipbook
                    levelPage.style.transition = 'opacity 0.5s ease-out';
                    levelPage.style.opacity = '0';
                    
                    setTimeout(() => {
                        levelPage.style.display = 'none';
                        flipbook.style.display = 'block';
                        
                        // Initialize the flipbook application
                        window.flipbook = new FlipbookApp();
                        window.flipbookApp = window.flipbook; // Make it accessible for language switching
                        
                        // Fade in the flipbook
                        flipbook.style.opacity = '0';
                        flipbook.style.transition = 'opacity 0.5s ease-in';
                        setTimeout(() => {
                            flipbook.style.opacity = '1';
                        }, 50);
                    }, 500);
                });
            });
            
            // Back to home button
            backToHomeBtn.addEventListener('click', () => {
                levelPage.style.transition = 'opacity 0.5s ease-out';
                levelPage.style.opacity = '0';
                
                setTimeout(() => {
                    levelPage.style.display = 'none';
                    goBackToHome();
                }, 500);
            });

            // Close button functionality
            const closeLevelPageBtn = document.getElementById('closeLevelPage');
            closeLevelPageBtn.addEventListener('click', () => {
                levelPage.style.transition = 'opacity 0.5s ease-out';
                levelPage.style.opacity = '0';
                
                setTimeout(() => {
                    levelPage.style.display = 'none';
                    goBackToHome();
                }, 500);
            });
        }

        // Quiz questions database
        const curiousMindsQuestions = [
            {
                question: "What is the main character's name?",
                questionAr: "Ù…Ø§ Ø§Ø³Ù… Ø§Ù„Ø´Ø®ØµÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©ØŸ",
                options: ["Sunny", "Sparky", "Flash", "Bright"],
                optionsAr: ["Ø³Ø§Ù†ÙŠ", "Ø³Ø¨Ø§Ø±ÙƒÙŠ", "ÙÙ„Ø§Ø´", "Ø¨Ø±Ø§ÙŠØª"],
                correct: 1
            },
            {
                question: "What caused Sparky to fly into space?",
                questionAr: "Ù…Ø§ Ø§Ù„Ø°ÙŠ ØªØ³Ø¨Ø¨ ÙÙŠ Ø·ÙŠØ±Ø§Ù† Ø³Ø¨Ø§Ø±ÙƒÙŠ Ø¥Ù„Ù‰ Ø§Ù„ÙØ¶Ø§Ø¡ØŸ",
                options: ["A rocket launch", "The Sun's sneeze", "A strong wind", "An explosion"],
                optionsAr: ["Ø¥Ø·Ù„Ø§Ù‚ ØµØ§Ø±ÙˆØ®", "Ø¹Ø·Ø³Ø© Ø§Ù„Ø´Ù…Ø³", "Ø±ÙŠØ§Ø­ Ù‚ÙˆÙŠØ©", "Ø§Ù†ÙØ¬Ø§Ø±"],
                correct: 1
            },
            {
                question: "What was Sparky's first stop on the journey?",
                questionAr: "Ù…Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù…Ø­Ø·Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù„Ø³Ø¨Ø§Ø±ÙƒÙŠ ÙÙŠ Ø§Ù„Ø±Ø­Ù„Ø©ØŸ",
                options: ["Power lines", "Airplanes", "Satellites", "Space station"],
                optionsAr: ["Ø®Ø·ÙˆØ· Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡", "Ø§Ù„Ø·Ø§Ø¦Ø±Ø§Øª", "Ø§Ù„Ø£Ù‚Ù…Ø§Ø± Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ©", "Ù…Ø­Ø·Ø© Ø§Ù„ÙØ¶Ø§Ø¡"],
                correct: 2
            },
            {
                question: "What happens when space weather affects satellites?",
                questionAr: "Ù…Ø§Ø°Ø§ ÙŠØ­Ø¯Ø« Ø¹Ù†Ø¯Ù…Ø§ ÙŠØ¤Ø«Ø± Ø·Ù‚Ø³ Ø§Ù„ÙØ¶Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù…Ø§Ø± Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ©ØŸ",
                options: ["They get faster", "They spin and get dizzy", "They disappear", "They change color"],
                optionsAr: ["ØªØµØ¨Ø­ Ø£Ø³Ø±Ø¹", "ØªØ¯ÙˆØ± ÙˆØªØµØ§Ø¨ Ø¨Ø§Ù„Ø¯ÙˆØ§Ø±", "ØªØ®ØªÙÙŠ", "ØªØºÙŠØ± Ù„ÙˆÙ†Ù‡Ø§"],
                correct: 1
            },
            {
                question: "How did the space station protect the astronauts?",
                questionAr: "ÙƒÙŠÙ Ø­Ù…Øª Ù…Ø­Ø·Ø© Ø§Ù„ÙØ¶Ø§Ø¡ Ø±ÙˆØ§Ø¯ Ø§Ù„ÙØ¶Ø§Ø¡ØŸ",
                options: ["It was invisible", "It was super-strong and built for protection", "It moved away quickly", "It had a magic shield"],
                optionsAr: ["ÙƒØ§Ù†Øª ØºÙŠØ± Ù…Ø±Ø¦ÙŠØ©", "ÙƒØ§Ù†Øª Ù‚ÙˆÙŠØ© Ø¬Ø¯Ø§Ù‹ ÙˆÙ…Ø¨Ù†ÙŠØ© Ù„Ù„Ø­Ù…Ø§ÙŠØ©", "ØªØ­Ø±ÙƒØª Ø¨Ø¹ÙŠØ¯Ø§Ù‹ Ø¨Ø³Ø±Ø¹Ø©", "ÙƒØ§Ù† Ù„Ø¯ÙŠÙ‡Ø§ Ø¯Ø±Ø¹ Ø³Ø­Ø±ÙŠ"],
                correct: 1
            },
            {
                question: "What beautiful light show did Sparky create at the end?",
                questionAr: "Ù…Ø§ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¶ÙˆØ¦ÙŠ Ø§Ù„Ø¬Ù…ÙŠÙ„ Ø§Ù„Ø°ÙŠ Ø£Ù†Ø´Ø£Ù‡ Ø³Ø¨Ø§Ø±ÙƒÙŠ ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©ØŸ",
                options: ["Lightning", "Rainbow", "Aurora", "Fireworks"],
                optionsAr: ["Ø§Ù„Ø¨Ø±Ù‚", "Ù‚ÙˆØ³ Ù‚Ø²Ø­", "Ø§Ù„Ø´ÙÙ‚ Ø§Ù„Ù‚Ø·Ø¨ÙŠ", "Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù†Ø§Ø±ÙŠØ©"],
                correct: 2
            },
            {
                question: "Why couldn't Sparky get inside the space station?",
                questionAr: "Ù„Ù…Ø§Ø°Ø§ Ù„Ù… ÙŠØ³ØªØ·Ø¹ Ø³Ø¨Ø§Ø±ÙƒÙŠ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ù…Ø­Ø·Ø© Ø§Ù„ÙØ¶Ø§Ø¡ØŸ",
                options: ["The door was locked", "It was too small", "It was designed to keep space weather out", "The astronauts were sleeping"],
                optionsAr: ["ÙƒØ§Ù† Ø§Ù„Ø¨Ø§Ø¨ Ù…Ù‚ÙÙ„Ø§Ù‹", "ÙƒØ§Ù†Øª ØµØºÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹", "ÙƒØ§Ù†Øª Ù…ØµÙ…Ù…Ø© Ù„Ø¥Ø¨Ø¹Ø§Ø¯ Ø·Ù‚Ø³ Ø§Ù„ÙØ¶Ø§Ø¡", "ÙƒØ§Ù† Ø±ÙˆØ§Ø¯ Ø§Ù„ÙØ¶Ø§Ø¡ Ù†Ø§Ø¦Ù…ÙŠÙ†"],
                correct: 2
            },
            {
                question: "What did Farmer Fran do when her tractor's GPS stopped working?",
                questionAr: "Ù…Ø§Ø°Ø§ ÙØ¹Ù„Øª Ø§Ù„Ù…Ø²Ø§Ø±Ø¹Ø© ÙØ±Ø§Ù† Ø¹Ù†Ø¯Ù…Ø§ ØªÙˆÙ‚Ù Ù†Ø¸Ø§Ù… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ ÙÙŠ Ø¬Ø±Ø§Ø±Ù‡Ø§ØŸ",
                options: ["Called for help", "Stopped working", "Steered herself", "Got angry"],
                optionsAr: ["Ø·Ù„Ø¨Øª Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©", "ØªÙˆÙ‚ÙØª Ø¹Ù† Ø§Ù„Ø¹Ù…Ù„", "Ù‚Ø§Ø¯Øª Ø¨Ù†ÙØ³Ù‡Ø§", "ØºØ¶Ø¨Øª"],
                correct: 2
            },
            {
                question: "Which of these shows how humans prepare for space weather?",
                questionAr: "Ø£ÙŠ Ù…Ù† Ù‡Ø°Ù‡ ÙŠÙØ¸Ù‡Ø± ÙƒÙŠÙ ÙŠØ³ØªØ¹Ø¯ Ø§Ù„Ø¨Ø´Ø± Ù„Ø·Ù‚Ø³ Ø§Ù„ÙØ¶Ø§Ø¡ØŸ",
                options: ["Building strong space stations", "Training workers to fix problems", "Having backup systems", "All of the above"],
                optionsAr: ["Ø¨Ù†Ø§Ø¡ Ù…Ø­Ø·Ø§Øª ÙØ¶Ø§Ø¡ Ù‚ÙˆÙŠØ©", "ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ø¹Ù…Ø§Ù„ Ù„Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„", "ÙˆØ¬ÙˆØ¯ Ø£Ù†Ø¸Ù…Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©", "ÙƒÙ„ Ù…Ø§ Ø³Ø¨Ù‚"],
                correct: 3
            },
            {
                question: "If you were a scientist and saw satellites wobbling, what would you do?",
                questionAr: "Ø¥Ø°Ø§ ÙƒÙ†Øª Ø¹Ø§Ù„Ù…Ø§Ù‹ ÙˆØ±Ø£ÙŠØª Ø£Ù‚Ù…Ø§Ø±Ø§Ù‹ ØµÙ†Ø§Ø¹ÙŠØ© ØªØªÙ…Ø§ÙŠÙ„ØŒ Ù…Ø§Ø°Ø§ Ø³ØªÙØ¹Ù„ØŸ",
                options: ["Ignore it", "Send a signal to help fix them", "Turn them off", "Wait and see"],
                optionsAr: ["ØªØ¬Ø§Ù‡Ù„Ù‡Ø§", "Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø§Ø±Ø© Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙ‡Ø§ ÙÙŠ Ø§Ù„Ø¥ØµÙ„Ø§Ø­", "Ø¥Ø·ÙØ§Ø¤Ù‡Ø§", "Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± ÙˆØ§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©"],
                correct: 1
            },
            {
                question: "What does this story teach us about space weather?",
                questionAr: "Ù…Ø§Ø°Ø§ ØªØ¹Ù„Ù…Ù†Ø§ Ù‡Ø°Ù‡ Ø§Ù„Ù‚ØµØ© Ø¹Ù† Ø·Ù‚Ø³ Ø§Ù„ÙØ¶Ø§Ø¡ØŸ",
                options: ["It only affects the Sun", "It can impact technology on Earth", "It's always dangerous", "It only happens at night"],
                optionsAr: ["ÙŠØ¤Ø«Ø± ÙÙ‚Ø· Ø¹Ù„Ù‰ Ø§Ù„Ø´Ù…Ø³", "ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø±Ø¶", "Ø¥Ù†Ù‡ Ø®Ø·ÙŠØ± Ø¯Ø§Ø¦Ù…Ø§Ù‹", "ÙŠØ­Ø¯Ø« ÙÙ‚Ø· ÙÙŠ Ø§Ù„Ù„ÙŠÙ„"],
                correct: 1
            },
            {
                question: "How are the people in the story (scientist, worker, pilot, farmer) similar?",
                questionAr: "ÙƒÙŠÙ ÙŠØªØ´Ø§Ø¨Ù‡ Ø§Ù„Ø£Ø´Ø®Ø§Øµ ÙÙŠ Ø§Ù„Ù‚ØµØ© (Ø§Ù„Ø¹Ø§Ù„Ù…ØŒ Ø§Ù„Ø¹Ø§Ù…Ù„ØŒ Ø§Ù„Ø·ÙŠØ§Ø±ØŒ Ø§Ù„Ù…Ø²Ø§Ø±Ø¹)ØŸ",
                options: ["They all live in space", "They all know how to handle problems", "They all have the same job", "They all met Sparky"],
                optionsAr: ["ÙƒÙ„Ù‡Ù… ÙŠØ¹ÙŠØ´ÙˆÙ† ÙÙŠ Ø§Ù„ÙØ¶Ø§Ø¡", "ÙƒÙ„Ù‡Ù… ÙŠØ¹Ø±ÙÙˆÙ† ÙƒÙŠÙÙŠØ© Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„", "ÙƒÙ„Ù‡Ù… Ù„Ø¯ÙŠÙ‡Ù… Ù†ÙØ³ Ø§Ù„ÙˆØ¸ÙŠÙØ©", "ÙƒÙ„Ù‡Ù… Ø§Ù„ØªÙ‚ÙˆØ§ Ø¨Ø³Ø¨Ø§Ø±ÙƒÙŠ"],
                correct: 1
            }
        ];

        const brightSeekersQuestions = [
            {
                question: "What is Celeste's main hobby that she does every clear night?",
                questionAr: "Ù…Ø§ Ù‡Ùˆ Ù‡ÙˆØ§ÙŠØ© Ø³ÙŠÙ„ÙŠØ³Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø§Ù„ØªÙŠ ØªÙ…Ø§Ø±Ø³Ù‡Ø§ ÙƒÙ„ Ù„ÙŠÙ„Ø© ØµØ§ÙÙŠØ©ØŸ",
                options: ["Reading books", "Setting up her telescope", "Playing video games", "Drawing pictures"],
                optionsAr: ["Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ÙƒØªØ¨", "Ø¥Ø¹Ø¯Ø§Ø¯ ØªÙ„Ø³ÙƒÙˆØ¨Ù‡Ø§", "Ù„Ø¹Ø¨ Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ", "Ø±Ø³Ù… Ø§Ù„ØµÙˆØ±"],
                correct: 1
            },
            {
                question: "What problems did Celeste experience with her technology during the story?",
                questionAr: "Ù…Ø§ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ØªÙŠ ÙˆØ§Ø¬Ù‡ØªÙ‡Ø§ Ø³ÙŠÙ„ÙŠØ³Øª Ù…Ø¹ ØªÙ‚Ù†ÙŠØªÙ‡Ø§ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù‚ØµØ©ØŸ",
                options: ["Only her phone stopped working", "Her telescope camera flickered and star map app crashed", "Her computer broke", "The internet was slow"],
                optionsAr: ["Ù‡Ø§ØªÙÙ‡Ø§ ÙÙ‚Ø· ØªÙˆÙ‚Ù Ø¹Ù† Ø§Ù„Ø¹Ù…Ù„", "ÙƒØ§Ù…ÙŠØ±Ø§ ØªÙ„Ø³ÙƒÙˆØ¨Ù‡Ø§ ØªØ±Ù…Ø´ ÙˆØªØ·Ø¨ÙŠÙ‚ Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù†Ø¬ÙˆÙ… ØªØ¹Ø·Ù„", "Ø­Ø§Ø³ÙˆØ¨Ù‡Ø§ ØªØ¹Ø·Ù„", "Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙƒØ§Ù† Ø¨Ø·ÙŠØ¦Ø§Ù‹"],
                correct: 1
            },
            {
                question: "What did Celeste discover was causing her technology problems?",
                questionAr: "Ù…Ø§ Ø§Ù„Ø°ÙŠ Ø§ÙƒØªØ´ÙØª Ø³ÙŠÙ„ÙŠØ³Øª Ø£Ù†Ù‡ ÙŠØ³Ø¨Ø¨ Ù…Ø´Ø§ÙƒÙ„ ØªÙ‚Ù†ÙŠØªÙ‡Ø§ØŸ",
                options: ["A power outage", "Space weather from a solar storm", "A broken internet connection", "Old equipment"],
                optionsAr: ["Ø§Ù†Ù‚Ø·Ø§Ø¹ ÙÙŠ Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡", "Ø·Ù‚Ø³ Ø§Ù„ÙØ¶Ø§Ø¡ Ù…Ù† Ø¹Ø§ØµÙØ© Ø´Ù…Ø³ÙŠØ©", "Ø§ØªØµØ§Ù„ Ø¥Ù†ØªØ±Ù†Øª Ù…Ø¹Ø·Ù„", "Ù…Ø¹Ø¯Ø§Øª Ù‚Ø¯ÙŠÙ…Ø©"],
                correct: 1
            },
            {
                question: "What is a Coronal Mass Ejection (CME) according to Celeste's father?",
                questionAr: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø§Ù†Ø¨Ø¹Ø§Ø« Ø§Ù„ÙƒØªÙ„ÙŠ Ø§Ù„Ø¥ÙƒÙ„ÙŠÙ„ÙŠ Ø­Ø³Ø¨ ÙˆØ§Ù„Ø¯ Ø³ÙŠÙ„ÙŠØ³ØªØŸ",
                options: ["A type of star", "Giant clouds of charged particles from the Sun", "A new planet", "A broken satellite"],
                optionsAr: ["Ù†ÙˆØ¹ Ù…Ù† Ø§Ù„Ù†Ø¬ÙˆÙ…", "ØºÙŠÙˆÙ… Ø¹Ù…Ù„Ø§Ù‚Ø© Ù…Ù† Ø§Ù„Ø¬Ø³ÙŠÙ…Ø§Øª Ø§Ù„Ù…Ø´Ø­ÙˆÙ†Ø© Ù…Ù† Ø§Ù„Ø´Ù…Ø³", "ÙƒÙˆÙƒØ¨ Ø¬Ø¯ÙŠØ¯", "Ù‚Ù…Ø± ØµÙ†Ø§Ø¹ÙŠ Ù…Ø¹Ø·Ù„"],
                correct: 1
            },
            {
                question: "How did Celeste adapt when her digital technology stopped working?",
                questionAr: "ÙƒÙŠÙ ØªÙƒÙŠÙØª Ø³ÙŠÙ„ÙŠØ³Øª Ø¹Ù†Ø¯Ù…Ø§ ØªÙˆÙ‚ÙØª ØªÙ‚Ù†ÙŠØªÙ‡Ø§ Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ø¹Ù† Ø§Ù„Ø¹Ù…Ù„ØŸ",
                options: ["She gave up stargazing", "She used old paper star charts and guided her telescope manually", "She went to sleep", "She called for help"],
                optionsAr: ["ØªØ®Ù„Øª Ø¹Ù† Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù†Ø¬ÙˆÙ…", "Ø§Ø³ØªØ®Ø¯Ù…Øª Ø®Ø±Ø§Ø¦Ø· Ø§Ù„Ù†Ø¬ÙˆÙ… Ø§Ù„ÙˆØ±Ù‚ÙŠØ© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ÙˆÙˆØ¬Ù‡Øª ØªÙ„Ø³ÙƒÙˆØ¨Ù‡Ø§ ÙŠØ¯ÙˆÙŠØ§Ù‹", "Ø°Ù‡Ø¨Øª Ù„Ù„Ù†ÙˆÙ…", "Ø·Ù„Ø¨Øª Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©"],
                correct: 1
            },
            {
                question: "What constellation did Celeste find using her paper star charts?",
                questionAr: "Ø£ÙŠ ÙƒÙˆÙƒØ¨Ø© ÙˆØ¬Ø¯Øª Ø³ÙŠÙ„ÙŠØ³Øª Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®Ø±Ø§Ø¦Ø· Ø§Ù„Ù†Ø¬ÙˆÙ… Ø§Ù„ÙˆØ±Ù‚ÙŠØ©ØŸ",
                options: ["The Big Dipper", "Orion", "Cassiopeia", "Ursa Major"],
                optionsAr: ["Ø§Ù„Ø¯Ø¨ Ø§Ù„Ø£ÙƒØ¨Ø±", "Ø§Ù„Ø¬Ø¨Ø§Ø±", "Ø°Ø§Øª Ø§Ù„ÙƒØ±Ø³ÙŠ", "Ø§Ù„Ø¯Ø¨Ø© Ø§Ù„ÙƒØ¨Ø±Ù‰"],
                correct: 1
            },
            {
                question: "What beautiful phenomenon might be visible during strong solar storms?",
                questionAr: "Ù…Ø§ Ø§Ù„Ø¸Ø§Ù‡Ø±Ø© Ø§Ù„Ø¬Ù…ÙŠÙ„Ø© Ø§Ù„ØªÙŠ Ù‚Ø¯ ØªÙƒÙˆÙ† Ù…Ø±Ø¦ÙŠØ© Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¹ÙˆØ§ØµÙ Ø§Ù„Ø´Ù…Ø³ÙŠØ© Ø§Ù„Ù‚ÙˆÙŠØ©ØŸ",
                options: ["Shooting stars", "Auroras (Northern/Southern Lights)", "Comets", "Solar eclipses"],
                optionsAr: ["Ø§Ù„Ø´Ù‡Ø¨", "Ø§Ù„Ø´ÙÙ‚ Ø§Ù„Ù‚Ø·Ø¨ÙŠ", "Ø§Ù„Ù…Ø°Ù†Ø¨Ø§Øª", "ÙƒØ³ÙˆÙ Ø§Ù„Ø´Ù…Ø³"],
                correct: 1
            },
            {
                question: "What did Celeste learn about the relationship between the Sun and Earth?",
                questionAr: "Ù…Ø§Ø°Ø§ ØªØ¹Ù„Ù…Øª Ø³ÙŠÙ„ÙŠØ³Øª Ø¹Ù† Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© Ø¨ÙŠÙ† Ø§Ù„Ø´Ù…Ø³ ÙˆØ§Ù„Ø£Ø±Ø¶ØŸ",
                options: ["They are completely separate", "The Sun and Earth are always in conversation, sending signals and storms", "The Earth controls the Sun", "They only interact during eclipses"],
                optionsAr: ["Ù‡Ù…Ø§ Ù…Ù†ÙØµÙ„Ø§Ù† ØªÙ…Ø§Ù…Ø§Ù‹", "Ø§Ù„Ø´Ù…Ø³ ÙˆØ§Ù„Ø£Ø±Ø¶ ÙÙŠ Ù…Ø­Ø§Ø¯Ø«Ø© Ø¯Ø§Ø¦Ù…Ø©ØŒ ØªØ±Ø³Ù„Ø§Ù† Ø¥Ø´Ø§Ø±Ø§Øª ÙˆØ¹ÙˆØ§ØµÙ", "Ø§Ù„Ø£Ø±Ø¶ ØªØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø´Ù…Ø³", "ÙŠØªÙØ§Ø¹Ù„Ø§Ù† ÙÙ‚Ø· Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙƒØ³ÙˆÙ"],
                correct: 1
            },
            {
                question: "How far does the Sun's power reach according to Celeste's story?",
                questionAr: "Ø¥Ù„Ù‰ Ø£ÙŠ Ù…Ø¯Ù‰ ØªØµÙ„ Ù‚ÙˆØ© Ø§Ù„Ø´Ù…Ø³ Ø­Ø³Ø¨ Ù‚ØµØ© Ø³ÙŠÙ„ÙŠØ³ØªØŸ",
                options: ["Only to the Moon", "150 million kilometers to Earth", "Just to nearby planets", "Only during the day"],
                optionsAr: ["ÙÙ‚Ø· Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ù…Ø±", "Ù¡Ù¥Ù  Ù…Ù„ÙŠÙˆÙ† ÙƒÙŠÙ„ÙˆÙ…ØªØ± Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø±Ø¶", "ÙÙ‚Ø· Ø¥Ù„Ù‰ Ø§Ù„ÙƒÙˆØ§ÙƒØ¨ Ø§Ù„Ù‚Ø±ÙŠØ¨Ø©", "ÙÙ‚Ø· Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†Ù‡Ø§Ø±"],
                correct: 1
            },
            {
                question: "What was Celeste's main realization at the end of her experience?",
                questionAr: "Ù…Ø§ ÙƒØ§Ù† Ø§Ù„Ø¥Ø¯Ø±Ø§Ùƒ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ø³ÙŠÙ„ÙŠØ³Øª ÙÙŠ Ù†Ù‡Ø§ÙŠØ© ØªØ¬Ø±Ø¨ØªÙ‡Ø§ØŸ",
                options: ["Technology is unreliable", "Studying stars isn't just about looking out, but learning how we're connected to the cosmos", "Paper charts are better than digital", "Solar storms are dangerous"],
                optionsAr: ["Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ ØºÙŠØ± Ù…ÙˆØ«ÙˆÙ‚Ø©", "Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ù†Ø¬ÙˆÙ… Ù„ÙŠØ³Øª ÙÙ‚Ø· Ø¹Ù† Ø§Ù„Ù†Ø¸Ø± Ù„Ù„Ø®Ø§Ø±Ø¬ØŒ Ø¨Ù„ ØªØ¹Ù„Ù… ÙƒÙŠÙ Ù†Ø­Ù† Ù…ØªØµÙ„ÙˆÙ† Ø¨Ø§Ù„ÙƒÙˆÙ†", "Ø§Ù„Ø®Ø±Ø§Ø¦Ø· Ø§Ù„ÙˆØ±Ù‚ÙŠØ© Ø£ÙØ¶Ù„ Ù…Ù† Ø§Ù„Ø±Ù‚Ù…ÙŠØ©", "Ø§Ù„Ø¹ÙˆØ§ØµÙ Ø§Ù„Ø´Ù…Ø³ÙŠØ© Ø®Ø·ÙŠØ±Ø©"],
                correct: 1
            }
        ];

        

        function showQuizPage(selectedLevel = 'curious') {
            // Get current language
            const isArabic = document.getElementById('arabicBtn').classList.contains('active');
            
            // Define different question sets for different levels
            let questionsToUse = [];
            let questionCount = 5;
            let quizTitle = '';
            let quizTitleAr = '';
            
            switch(selectedLevel) {
                case 'curious':
                    questionsToUse = curiousMindsQuestions || quizQuestions; // Use level-specific questions
                    questionCount = 5;
                    quizTitle = 'Young Explorers Quiz';
                    quizTitleAr = 'Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø³ØªÙƒØ´ÙÙŠÙ† Ø§Ù„ØµØºØ§Ø±';
                    break;
                case 'seekers':
                    questionsToUse = brightSeekersQuestions || quizQuestions; // Use level-specific questions
                    questionCount = 7;
                    quizTitle = 'Senior Explorers Quiz';
                    quizTitleAr = 'Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø³ØªÙƒØ´ÙÙŠÙ† Ø§Ù„ÙƒØ¨Ø§Ø±';
                    break;
                default:
                    questionsToUse = curiousMindsQuestions || quizQuestions;
                    questionCount = 5;
                    quizTitle = 'Young Explorers Quiz';
                    quizTitleAr = 'Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø³ØªÙƒØ´ÙÙŠÙ† Ø§Ù„ØµØºØ§Ø±';
            }
            
            // Select random questions based on level
            const selectedQuestions = getRandomQuestions(questionCount, questionsToUse);
            let currentQuestion = 0;
            let score = 0;
            let userAnswers = [];

            // Create quiz page HTML
            const quizHTML = `
                <div id="quizPage" style="
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100vw;
                    height: 100vh;
                    background: linear-gradient(135deg, rgba(30, 60, 114, 0.8) 0%, rgba(42, 82, 152, 0.8) 100%);
                    backdrop-filter: blur(15px);
                    -webkit-backdrop-filter: blur(15px);
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    align-items: center;
                    z-index: 1001;
                    color: white;
                    text-align: center;
                    font-family: 'Arial', sans-serif;
                    direction: ${isArabic ? 'rtl' : 'ltr'};
                    overflow-y: auto;
                ">
                    <div id="quizContainer" style="
                        background: rgba(255, 255, 255, 0.1);
                        backdrop-filter: blur(10px);
                        border-radius: 20px;
                        padding: 40px;
                        max-width: 800px;
                        width: 90%;
                        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
                        border: 1px solid rgba(255, 255, 255, 0.2);
                    ">
                        <h1 style="font-size: 2.5em; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">
                            ğŸ§  ${isArabic ? quizTitleAr : quizTitle}
                        </h1>
                        <div id="progressBar" style="
                            width: 100%;
                            height: 8px;
                            background: rgba(255, 255, 255, 0.2);
                            border-radius: 4px;
                            margin: 20px 0;
                            overflow: hidden;
                        ">
                            <div id="progress" style="
                                width: 0%;
                                height: 100%;
                                background: linear-gradient(90deg, #ffa366, #ff6b6b);
                                border-radius: 4px;
                                transition: width 0.3s ease;
                            "></div>
                        </div>
                        <div id="questionCounter" style="font-size: 1.2em; margin-bottom: 30px; opacity: 0.8;">
                            ${isArabic ? 'Ø§Ù„Ø³Ø¤Ø§Ù„' : 'Question'} <span id="currentQ">1</span> ${isArabic ? 'Ù…Ù†' : 'of'} ${questionCount}
                        </div>
                        <div id="quizContent"></div>
                    </div>
                </div>
            `;
            
            // Add quiz page to body
            document.body.insertAdjacentHTML('beforeend', quizHTML);
            
            // Show first question
            showQuestion();
            
            function getRandomQuestions(count, questionPool) {
                const shuffled = [...questionPool].sort(() => 0.5 - Math.random());
                return shuffled.slice(0, count);
            }
            
            function showQuestion() {
                const question = selectedQuestions[currentQuestion];
                const questionText = isArabic ? question.questionAr : question.question;
                const options = isArabic ? question.optionsAr : question.options;
                
                const quizContent = document.getElementById('quizContent');
                quizContent.innerHTML = `
                    <div style="margin-bottom: 30px;">
                        <h2 style="font-size: 1.8em; margin-bottom: 30px; line-height: 1.4;">
                            ${questionText}
                        </h2>
                        <div id="optionsContainer" style="display: grid; gap: 15px; max-width: 600px; margin: 0 auto;">
                            ${options.map((option, index) => `
                                <button class="quiz-option" data-index="${index}" style="
                                    background: rgba(255, 255, 255, 0.1);
                                    border: 2px solid rgba(255, 255, 255, 0.3);
                                    color: white;
                                    padding: 15px 20px;
                                    border-radius: 12px;
                                    font-size: 1.1em;
                                    cursor: pointer;
                                    transition: all 0.3s ease;
                                    text-align: ${isArabic ? 'right' : 'left'};
                                " onmouseover="this.style.background='rgba(255, 255, 255, 0.2)'; this.style.borderColor='rgba(255, 255, 255, 0.5)'" 
                                   onmouseout="this.style.background='rgba(255, 255, 255, 0.1)'; this.style.borderColor='rgba(255, 255, 255, 0.3)'">
                                    ${String.fromCharCode(65 + index)}) ${option}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                `;
                
                // Update progress
                const progress = ((currentQuestion) / questionCount) * 100;
                document.getElementById('progress').style.width = progress + '%';
                document.getElementById('currentQ').textContent = currentQuestion + 1;
                
                // Add click handlers to options
                document.querySelectorAll('.quiz-option').forEach(option => {
                    option.addEventListener('click', () => selectAnswer(parseInt(option.dataset.index)));
                });
            }
            
            function selectAnswer(selectedIndex) {
                const question = selectedQuestions[currentQuestion];
                const isCorrect = selectedIndex === question.correct;
                
                userAnswers.push({
                    question: currentQuestion,
                    selected: selectedIndex,
                    correct: question.correct,
                    isCorrect: isCorrect
                });
                
                if (isCorrect) {
                    score++;
                }
                
                // Show feedback
                showFeedback(selectedIndex, question.correct);
                
                setTimeout(() => {
                    currentQuestion++;
                    if (currentQuestion < questionCount) {
                        showQuestion();
                    } else {
                        showResults();
                    }
                }, 1500);
            }
            
            function showFeedback(selected, correct) {
                const options = document.querySelectorAll('.quiz-option');
                options.forEach((option, index) => {
                    option.style.pointerEvents = 'none';
                    if (index === correct) {
                        option.style.background = 'rgba(76, 175, 80, 0.8)';
                        option.style.borderColor = '#4CAF50';
                    } else if (index === selected && selected !== correct) {
                        option.style.background = 'rgba(244, 67, 54, 0.8)';
                        option.style.borderColor = '#f44336';
                    }
                });
            }
            
            function showResults() {
                const percentage = Math.round((score / questionCount) * 100);
                let message, messageAr, emoji;
                
                if (percentage >= 80) {
                    message = "Excellent! You're a space weather expert! ğŸŒŸ";
                    messageAr = "Ù…Ù…ØªØ§Ø²! Ø£Ù†Øª Ø®Ø¨ÙŠØ± ÙÙŠ Ø·Ù‚Ø³ Ø§Ù„ÙØ¶Ø§Ø¡! ğŸŒŸ";
                    emoji = "ğŸ†";
                } else if (percentage >= 60) {
                    message = "Great job! You understand the story well! ğŸ‘";
                    messageAr = "Ø¹Ù…Ù„ Ø±Ø§Ø¦Ø¹! Ø£Ù†Øª ØªÙÙ‡Ù… Ø§Ù„Ù‚ØµØ© Ø¬ÙŠØ¯Ø§Ù‹! ğŸ‘";
                    emoji = "ğŸ‰";
                } else {
                    message = "Good try! Read the story again to learn more! ğŸ“š";
                    messageAr = "Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬ÙŠØ¯Ø©! Ø§Ù‚Ø±Ø£ Ø§Ù„Ù‚ØµØ© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„ØªØªØ¹Ù„Ù… Ø£ÙƒØ«Ø±! ğŸ“š";
                    emoji = "ğŸ“–";
                }
                
                const quizContent = document.getElementById('quizContent');
                quizContent.innerHTML = `
                    <div style="text-align: center;">
                        <div style="font-size: 4em; margin-bottom: 20px;">${emoji}</div>
                        <h2 style="font-size: 2.5em; margin-bottom: 20px;">
                            ${isArabic ? 'Ø§Ù„Ù†ØªØ§Ø¦Ø¬' : 'Results'}
                        </h2>
                        <div style="font-size: 3em; margin-bottom: 20px; color: #ffa366;">
                            ${score}/${questionCount} (${percentage}%)
                        </div>
                        <p style="font-size: 1.4em; margin-bottom: 30px; line-height: 1.5;">
                            ${isArabic ? messageAr : message}
                        </p>
                        <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
                            <button id="retakeQuiz" style="
                                background: linear-gradient(45deg, #ffa366, #ff6b6b);
                                color: white;
                                border: none;
                                padding: 15px 30px;
                                font-size: 1.2em;
                                font-weight: bold;
                                border-radius: 25px;
                                cursor: pointer;
                                transition: all 0.3s ease;
                                box-shadow: 0 6px 20px rgba(255, 168, 102, 0.4);
                            ">${isArabic ? 'ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±' : 'ğŸ”„ Retake Quiz'}</button>
                            <button id="backToQuizLevels" style="
                                background: linear-gradient(45deg, #6b73ff, #9b59b6);
                                color: white;
                                border: none;
                                padding: 15px 30px;
                                font-size: 1.2em;
                                font-weight: bold;
                                border-radius: 25px;
                                cursor: pointer;
                                transition: all 0.3s ease;
                                box-shadow: 0 6px 20px rgba(107, 115, 255, 0.4);
                            ">${isArabic ? 'ğŸ“š Ù…Ø³ØªÙˆÙŠØ§Øª Ø£Ø®Ø±Ù‰' : 'ğŸ“š Other Levels'}</button>
                            <button id="backToHomeFromQuiz" style="
                                background: linear-gradient(45deg, var(--primary), var(--accent));
                                color: var(--text);
                                border: none;
                                padding: 15px 30px;
                                font-size: 1.2em;
                                font-weight: bold;
                                border-radius: 25px;
                                cursor: pointer;
                                transition: all 0.3s ease;
                                box-shadow: 0 6px 20px rgba(255, 168, 102, 0.4);
                            ">${isArabic ? 'ğŸ  Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©' : 'ğŸ  Back to Home'}</button>
                        </div>
                    </div>
                `;
                
                // Update progress to 100%
                document.getElementById('progress').style.width = '100%';
                document.getElementById('currentQ').textContent = questionCount;
                
                // Add event listeners
                document.getElementById('retakeQuiz').addEventListener('click', () => {
                    document.getElementById('quizPage').remove();
                    showQuizPage(selectedLevel);
                });
                
                document.getElementById('backToQuizLevels').addEventListener('click', () => {
                    document.getElementById('quizPage').remove();
                    showQuizLevelSelection();
                });
                
                document.getElementById('backToHomeFromQuiz').addEventListener('click', () => {
                    const quizPage = document.getElementById('quizPage');
                    quizPage.style.transition = 'opacity 0.5s ease-out';
                    quizPage.style.opacity = '0';
                    
                    setTimeout(() => {
                        quizPage.remove();
                        goBackToHome();
                    }, 500);
                });
            }
            
            // Fade in quiz page
            const quizPage = document.getElementById('quizPage');
            quizPage.style.opacity = '0';
            quizPage.style.transition = 'opacity 0.5s ease-in';
            setTimeout(() => {
                quizPage.style.opacity = '1';
            }, 50);
        }

        function showExploreSpaceWeather() {
            // Get current language
            const isArabic = document.getElementById('arabicBtn').classList.contains('active');
            
            // Create explore space weather page HTML with bilingual content
            const exploreHTML = `
                <div id="explorePage" style="
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100vw;
                    height: 100vh;
                    background: rgba(255, 255, 255, 0.1);
                    backdrop-filter: blur(20px);
                    -webkit-backdrop-filter: blur(20px);
                    display: flex;
                    flex-direction: column;
                    justify-content: flex-start;
                    align-items: center;
                    z-index: 1001;
                    color: var(--text);
                    text-align: center;
                    font-family: 'Arial', sans-serif;
                    direction: ${isArabic ? 'rtl' : 'ltr'};
                    overflow-y: auto;
                    padding: 20px;
                ">
                    <div style="max-width: 900px; width: 100%;">
                        <h1 style="font-size: 3.5em; margin-bottom: 30px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); color: var(--text);">
                            ${isArabic ? 'ğŸŒŒ Ø§Ø³ØªÙƒØ´Ù Ø·Ù‚Ø³ Ø§Ù„ÙØ¶Ø§Ø¡ Ø§Ù„Ø§Ù†' : 'ğŸŒŒ Explore Live Space Weather'}
                        </h1>
                        
                        <!-- Live Space Weather Widget -->
                        <div id="spaceWeatherWidget" style="
                            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 50%, var(--accent) 100%);
                            border-radius: 20px;
                            padding: 30px;
                            margin: 30px 0;
                            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                            border: 3px solid rgba(255,255,255,0.2);
                        ">
                            <h2 style="font-size: 2.5em; margin-bottom: 25px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">
                                â˜€ï¸ ${isArabic ? 'Ø·Ù‚Ø³ Ø§Ù„ÙØ¶Ø§Ø¡ Ø§Ù„ÙŠÙˆÙ…' : "Today's Space Weather"}
                            </h2>
                            
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 20px;">
                                <!-- Solar Wind -->
                                <div id="solarWindCard" style="
                                    background: var(--secondary);
                                    border-radius: 15px;
                                    padding: 20px;
                                    backdrop-filter: blur(10px);
                                    border: 2px solid var(--accent);
                                ">
                                    <h3 style="font-size: 1.8em; margin-bottom: 15px; color: var(--text);">
                                        ğŸŒ¬ï¸ ${isArabic ? 'Ø§Ù„Ø±ÙŠØ§Ø­ Ø§Ù„Ø´Ù…Ø³ÙŠØ©' : 'Solar Wind'}
                                    </h3>
                                    <div id="solarWindStatus" style="font-size: 2.5em; margin: 10px 0;">ğŸ”„</div>
                                    <p id="solarWindText" style="font-size: 1.3em; font-weight: bold; color: var(--text);">
                                        ${isArabic ? 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...' : 'Loading...'}
                                    </p>
                                </div>
                                
                                <!-- Solar Flares -->
                                <div id="solarFlareCard" style="
                                    background: var(--secondary);
                                    border-radius: 15px;
                                    padding: 20px;
                                    backdrop-filter: blur(10px);
                                    border: 2px solid var(--accent);
                                ">
                                    <h3 style="font-size: 1.8em; margin-bottom: 15px; color: var(--text);">
                                        âš¡ ${isArabic ? 'Ø§Ù„ØªÙˆÙ‡Ø¬Ø§Øª Ø§Ù„Ø´Ù…Ø³ÙŠØ©' : 'Solar Flares'}
                                    </h3>
                                    <div id="solarFlareStatus" style="font-size: 2.5em; margin: 10px 0;">ğŸ”„</div>
                                    <p id="solarFlareText" style="font-size: 1.3em; font-weight: bold; color: var(--text);">
                                        ${isArabic ? 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...' : 'Loading...'}
                                    </p>
                                </div>
                                
                                <!-- CME -->
                                <div id="cmeCard" style="
                                    background: var(--secondary);
                                    border-radius: 15px;
                                    padding: 20px;
                                    backdrop-filter: blur(10px);
                                    border: 2px solid var(--accent);
                                ">
                                    <h3 style="font-size: 1.8em; margin-bottom: 15px; color: var(--text);">
                                        ğŸ’¨ ${isArabic ? 'Ø§Ù†Ø¨Ø¹Ø§Ø«Ø§Øª Ø§Ù„ÙƒØªÙ„Ø© Ø§Ù„Ø¥ÙƒÙ„ÙŠÙ„ÙŠØ©' : 'Coronal Mass Ejections (CME)'}
                                    </h3>
                                    <div id="cmeStatus" style="font-size: 2.5em; margin: 10px 0;">ğŸ”„</div>
                                    <p id="cmeText" style="font-size: 1.3em; font-weight: bold; color: var(--text);">
                                        ${isArabic ? 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...' : 'Loading...'}
                                    </p>
                                </div>
                            </div>
                            
                            <p style="font-size: 1.1em; opacity: 0.8; margin-top: 20px; color: var(--text);">
                                ${isArabic ? 'ğŸ”„ ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« ÙƒÙ„ 5 Ø¯Ù‚Ø§Ø¦Ù‚' : 'ğŸ”„ Updates every 5 minutes'}
                            </p>
                        </div>
                        
                        <button id="backToHomeFromExplore" style="
                            background: var(--secondary);
                            color: var(--text);
                            border: 2px solid var(--primary);
                            padding: 15px 30px;
                            font-size: 1.1em;
                            font-weight: 500;
                            border-radius: 8px;
                            cursor: pointer;
                            transition: all 0.3s ease;
                            backdrop-filter: blur(10px);
                        ">${isArabic ? 'Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©' : 'Back to Home'}</button>
                    </div>
                </div>
            `;
            
            // Add explore page to body
            document.body.insertAdjacentHTML('beforeend', exploreHTML);
            
            // Initialize space weather widget
            initSpaceWeatherWidget();
            
            // Add back to home functionality
            document.getElementById('backToHomeFromExplore').addEventListener('click', () => {
                const explorePage = document.getElementById('explorePage');
                explorePage.style.transition = 'opacity 0.5s ease-out';
                explorePage.style.opacity = '0';
                
                setTimeout(() => {
                    explorePage.remove();
                    // Clear the update interval when leaving the page
                    if (window.spaceWeatherInterval) {
                        clearInterval(window.spaceWeatherInterval);
                    }
                    goBackToHome();
                }, 500);
            });
            
            // Fade in explore page
            const explorePage = document.getElementById('explorePage');
            explorePage.style.opacity = '0';
            explorePage.style.transition = 'opacity 0.5s ease-in';
            setTimeout(() => {
                explorePage.style.opacity = '1';
            }, 50);
        }
        
        function goBackToHome() {
            const homePage = document.getElementById('homePage');
            const flipbook = document.getElementById('flipbook');
            
            flipbook.style.transition = 'opacity 0.5s ease-out';
            flipbook.style.opacity = '0';
            
            setTimeout(() => {
                flipbook.style.display = 'none';
                homePage.style.display = 'flex';
                homePage.style.opacity = '0';
                homePage.style.transition = 'opacity 0.5s ease-in';
                setTimeout(() => {
                    homePage.style.opacity = '1';
                }, 50);
            }, 500);
        }

        
        // ========================================
        // LIVE SPACE WEATHER WIDGET
        // ========================================
        
        function initSpaceWeatherWidget() {
            // Fetch initial data
            updateSpaceWeatherData();
            
            // Set up auto-refresh every 5 minutes (300,000 milliseconds)
            window.spaceWeatherInterval = setInterval(updateSpaceWeatherData, 300000);
        }
        
        async function updateSpaceWeatherData() {
            const isArabic = document.getElementById('arabicBtn').classList.contains('active');
            
            try {
                // Show loading state
                showLoadingState(isArabic);
                
                // Fetch all three data sources concurrently with timeout
                const [solarWindData, solarFlareData, cmeData] = await Promise.allSettled([
                    fetchWithTimeout(fetchSolarWind(), 10000),
                    fetchWithTimeout(fetchSolarFlares(), 10000),
                    fetchWithTimeout(fetchCME(), 10000)
                ]);
                
                // Update Solar Wind
                if (solarWindData.status === 'fulfilled') {
                    updateSolarWindDisplay(solarWindData.value, isArabic);
                } else {
                    updateSolarWindDisplay(getMockSolarWindData(), isArabic);
                }
                
                // Update Solar Flares
                if (solarFlareData.status === 'fulfilled') {
                    updateSolarFlareDisplay(solarFlareData.value, isArabic);
                } else {
                    updateSolarFlareDisplay(getMockSolarFlareData(), isArabic);
                }
                
                // Update CME
                if (cmeData.status === 'fulfilled') {
                    updateCMEDisplay(cmeData.value, isArabic);
                } else {
                    updateCMEDisplay(getMockCMEData(), isArabic);
                }
                
            } catch (error) {
                console.error('Error fetching space weather data:', error);
                // Use mock data as fallback
                updateSolarWindDisplay(getMockSolarWindData(), isArabic);
                updateSolarFlareDisplay(getMockSolarFlareData(), isArabic);
                updateCMEDisplay(getMockCMEData(), isArabic);
            }
        }
        
        // Helper function to add timeout to fetch requests
        function fetchWithTimeout(promise, timeout) {
            return Promise.race([
                promise,
                new Promise((_, reject) => 
                    setTimeout(() => reject(new Error('Request timeout')), timeout)
                )
            ]);
        }
        
        // Mock data functions for fallback
        function getMockSolarWindData() {
            return { speed: 350 + Math.random() * 200 }; // Random speed between 350-550 km/s
        }
        
        function getMockSolarFlareData() {
            return { 
                maxFlux: Math.random() * 1e-5, 
                recentCount: Math.floor(Math.random() * 5) 
            };
        }
        
        function getMockCMEData() {
            return { 
                count: Math.random() > 0.7 ? 1 : 0, 
                events: [] 
            };
        }
        
        function showLoadingState(isArabic) {
            const elements = ['solarWindStatus', 'solarFlareStatus', 'cmeStatus'];
            const textElements = ['solarWindText', 'solarFlareText', 'cmeText'];
            
            elements.forEach(id => {
                const element = document.getElementById(id);
                if (element) element.textContent = 'ğŸ”„';
            });
            
            textElements.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = isArabic ? 
                        'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...' : 
                        'Loading...';
                }
            });
        }
        
        async function fetchSolarWind() {
            try {
                const response = await fetch('https://services.swpc.noaa.gov/products/solar-wind/mag-1-day.json');
                if (!response.ok) throw new Error('Solar wind data fetch failed');
                const data = await response.json();
                
                // Get the latest data point (last entry in array)
                const latest = data[data.length - 1];
                const speed = parseFloat(latest[6]); // Speed is in column 6
                
                return { speed };
            } catch (error) {
                console.warn('Solar wind API failed, using mock data:', error);
                throw error;
            }
        }
        
        async function fetchSolarFlares() {
            try {
                const response = await fetch('https://services.swpc.noaa.gov/json/goes/primary/xrays-1-day.json');
                if (!response.ok) throw new Error('Solar flare data fetch failed');
                const data = await response.json();
                
                // Get recent flare activity (last few hours)
                const now = new Date();
                const sixHoursAgo = new Date(now.getTime() - 6 * 60 * 60 * 1000);
                
                const recentFlares = data.filter(entry => {
                    const entryTime = new Date(entry.time_tag);
                    return entryTime > sixHoursAgo;
                });
                
                // Find the highest flux level in recent data
                let maxFlux = 0;
                recentFlares.forEach(entry => {
                    const flux = parseFloat(entry.flux);
                    if (flux > maxFlux) maxFlux = flux;
                });
                
                return { maxFlux, recentCount: recentFlares.length };
            } catch (error) {
                console.warn('Solar flare API failed, using mock data:', error);
                throw error;
            }
        }
        
        async function fetchCME() {
            try {
                // Using NASA DONKI API with demo key - replace with your actual API key
                const apiKey = 'DEMO_KEY'; // Replace with your NASA API key
                const today = new Date().toISOString().split('T')[0];
                const response = await fetch(`https://api.nasa.gov/DONKI/CME?startDate=${today}&api_key=${apiKey}`);
                
                if (!response.ok) throw new Error('CME data fetch failed');
                const data = await response.json();
                
                return { count: data.length, events: data };
            } catch (error) {
                console.warn('CME API failed, using mock data:', error);
                throw error;
            }
        }
        
        function updateSolarWindDisplay(data, isArabic) {
            const statusElement = document.getElementById('solarWindStatus');
            const textElement = document.getElementById('solarWindText');
            
            if (!statusElement || !textElement) return;
            
            const speed = data.speed;
            let emoji, status, statusAr;
            
            if (speed < 400) {
                emoji = 'ğŸŸ¢';
                status = 'Calm';
                statusAr = 'Ù‡Ø§Ø¯Ø¦';
            } else if (speed < 600) {
                emoji = 'ğŸŸ¡';
                status = 'Breezy';
                statusAr = 'Ù…Ø¹ØªØ¯Ù„';
            } else {
                emoji = 'ğŸ”´';
                status = 'Stormy';
                statusAr = 'Ø¹Ø§ØµÙ';
            }
            
            statusElement.textContent = emoji;
            textElement.textContent = isArabic ? 
                `${statusAr} (${Math.round(speed)} ÙƒÙ…/Ø«)` : 
                `${status} (${Math.round(speed)} km/s)`;
        }
        
        function updateSolarFlareDisplay(data, isArabic) {
            const statusElement = document.getElementById('solarFlareStatus');
            const textElement = document.getElementById('solarFlareText');
            
            if (!statusElement || !textElement) return;
            
            const maxFlux = data.maxFlux;
            let emoji, status, statusAr;
            
            if (maxFlux < 1e-6) {
                emoji = 'ğŸŒŸ';
                status = 'Small Flare';
                statusAr = 'ØªÙˆÙ‡Ø¬ ØµØºÙŠØ±';
            } else if (maxFlux < 1e-5) {
                emoji = 'âš¡';
                status = 'Strong Flare';
                statusAr = 'ØªÙˆÙ‡Ø¬ Ù‚ÙˆÙŠ';
            } else {
                emoji = 'ğŸŒ';
                status = 'Giant Flare';
                statusAr = 'ØªÙˆÙ‡Ø¬ Ø¹Ù…Ù„Ø§Ù‚';
            }
            
            statusElement.textContent = emoji;
            textElement.textContent = isArabic ? statusAr : status;
        }
        
        function updateCMEDisplay(data, isArabic) {
            const statusElement = document.getElementById('cmeStatus');
            const textElement = document.getElementById('cmeText');
            
            if (!statusElement || !textElement) return;
            
            if (data.count > 0) {
                statusElement.textContent = 'ğŸ’¨';
                textElement.textContent = isArabic ? 
                    'Ø§Ù„Ø´Ù…Ø³ Ø£Ø·Ù„Ù‚Øª Ø¨Ù„Ø§Ø²Ù…Ø§!' : 
                    'Sun burped plasma!';
            } else {
                statusElement.textContent = 'âœ…';
                textElement.textContent = isArabic ? 
                    'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø§Ù†Ø¨Ø¹Ø§Ø«Ø§Øª Ø§Ù„ÙŠÙˆÙ…' : 
                    'No CME today';
            }
        }
        
        function showErrorState(isArabic) {
            const elements = ['solarWindStatus', 'solarFlareStatus', 'cmeStatus'];
            const textElements = ['solarWindText', 'solarFlareText', 'cmeText'];
            
            elements.forEach(id => {
                const element = document.getElementById(id);
                if (element) element.textContent = 'âŒ';
            });
            
            textElements.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = isArabic ? 
                        'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„' : 
                        'Loading Error';
                }
            });
        }

        // ========================================
        // UTILITY FUNCTIONS FOR CUSTOMIZATION
        // ========================================
        
        // Function to add a new page (call from browser console if needed)
        function addPage(imageSrc) {
            const selectedLevel = window.selectedLevel || 'curious';
            const currentLanguage = window.currentLanguage || 'en';
            
            // Add to the appropriate level and language array
            if (levelPages[selectedLevel] && levelPages[selectedLevel][currentLanguage]) {
                levelPages[selectedLevel][currentLanguage].push(imageSrc);
            }
            
            if (window.flipbook) {
                const currentBookPages = getBookPages();
                window.flipbook.bookPages = currentBookPages;
                window.flipbook.totalPages = currentBookPages.length;
                window.flipbook.createPages();
                window.flipbook.updateDisplay();
            }
        }

        // Function to change book title (call from browser console if needed)
        function changeTitle(newTitle) {
            document.querySelector('.book-title').textContent = newTitle;
        }
    </script>
</body>
</html>